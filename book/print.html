<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head prefix="og: http://ogp.me/ns#">
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-33TT8KJQ8B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-33TT8KJQ8B');
        </script>

        <link rel="alternate" hreflang="en" href="https://dalance.github.io/veryl/book/" />
        <link rel="alternate" hreflang="ja" href="https://dalance.github.io/veryl/book/ja/" />

        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Veryl Hardware Description Language</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <meta property="og:url" content="https://github.com/dalance/veryl" />
        <meta property="og:title" content="Veryl: A Modern Hardware Description Language" />
        <meta property="og:description" content="Veryl is a hardware description language which is designed as a SystemVerilog alternative." />
        <meta property="og:image" content="https://github.com/dalance/veryl/raw/master/support/logo/veryl_ogp.png" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/css/language-picker.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="01_introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="02_getting_started.html"><strong aria-hidden="true">2.</strong> Getting Started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="02_getting_started/01_installation.html"><strong aria-hidden="true">2.1.</strong> Installation</a></li><li class="chapter-item "><a href="02_getting_started/02_hello_world.html"><strong aria-hidden="true">2.2.</strong> Hello, World!</a></li></ol></li><li class="chapter-item expanded "><a href="03_code_examples.html"><strong aria-hidden="true">3.</strong> Code Examples</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="03_code_examples/01_module.html"><strong aria-hidden="true">3.1.</strong> Module</a></li><li class="chapter-item "><a href="03_code_examples/02_instantiation.html"><strong aria-hidden="true">3.2.</strong> Instantiation</a></li><li class="chapter-item "><a href="03_code_examples/03_interface.html"><strong aria-hidden="true">3.3.</strong> Interface</a></li><li class="chapter-item "><a href="03_code_examples/04_package.html"><strong aria-hidden="true">3.4.</strong> Package</a></li></ol></li><li class="chapter-item expanded "><a href="04_language_reference.html"><strong aria-hidden="true">4.</strong> Language Reference</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="04_language_reference/01_source_code_structure.html"><strong aria-hidden="true">4.1.</strong> Source Code Structure</a></li><li class="chapter-item "><a href="04_language_reference/02_lexical_structure.html"><strong aria-hidden="true">4.2.</strong> Lexical Structure</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="04_language_reference/02_lexical_structure/01_operator.html"><strong aria-hidden="true">4.2.1.</strong> Operator</a></li><li class="chapter-item "><a href="04_language_reference/02_lexical_structure/02_number.html"><strong aria-hidden="true">4.2.2.</strong> Number</a></li></ol></li><li class="chapter-item "><a href="04_language_reference/03_data_type.html"><strong aria-hidden="true">4.3.</strong> Data Type</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="04_language_reference/03_data_type/01_builtin_type.html"><strong aria-hidden="true">4.3.1.</strong> Builtin Type</a></li><li class="chapter-item "><a href="04_language_reference/03_data_type/02_user_defined_type.html"><strong aria-hidden="true">4.3.2.</strong> User Defined Type</a></li><li class="chapter-item "><a href="04_language_reference/03_data_type/03_array.html"><strong aria-hidden="true">4.3.3.</strong> Array</a></li></ol></li><li class="chapter-item "><a href="04_language_reference/04_expression.html"><strong aria-hidden="true">4.4.</strong> Expression</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="04_language_reference/04_expression/01_operator_precedence.html"><strong aria-hidden="true">4.4.1.</strong> Operator Precedence</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/02_function_call.html"><strong aria-hidden="true">4.4.2.</strong> Function Call</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/03_concatenation.html"><strong aria-hidden="true">4.4.3.</strong> Concatenation</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/04_if.html"><strong aria-hidden="true">4.4.4.</strong> If</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/05_case.html"><strong aria-hidden="true">4.4.5.</strong> Case</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/06_bit_select.html"><strong aria-hidden="true">4.4.6.</strong> Bit Select</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/07_range.html"><strong aria-hidden="true">4.4.7.</strong> Range</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/08_msb_lsb.html"><strong aria-hidden="true">4.4.8.</strong> Msb / Lsb</a></li><li class="chapter-item "><a href="04_language_reference/04_expression/09_inside_outside.html"><strong aria-hidden="true">4.4.9.</strong> Inside / Outside</a></li></ol></li><li class="chapter-item "><a href="04_language_reference/05_statement.html"><strong aria-hidden="true">4.5.</strong> Statement</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="04_language_reference/05_statement/01_assignment.html"><strong aria-hidden="true">4.5.1.</strong> Assignment</a></li><li class="chapter-item "><a href="04_language_reference/05_statement/02_function_call.html"><strong aria-hidden="true">4.5.2.</strong> Function Call</a></li><li class="chapter-item "><a href="04_language_reference/05_statement/03_if.html"><strong aria-hidden="true">4.5.3.</strong> If</a></li><li class="chapter-item "><a href="04_language_reference/05_statement/04_case.html"><strong aria-hidden="true">4.5.4.</strong> Case</a></li><li class="chapter-item "><a href="04_language_reference/05_statement/05_for.html"><strong aria-hidden="true">4.5.5.</strong> For</a></li><li class="chapter-item "><a href="04_language_reference/05_statement/06_return.html"><strong aria-hidden="true">4.5.6.</strong> Return</a></li></ol></li><li class="chapter-item "><a href="04_language_reference/06_declaration.html"><strong aria-hidden="true">4.6.</strong> Declaration</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="04_language_reference/06_declaration/01_variable.html"><strong aria-hidden="true">4.6.1.</strong> Variable</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/02_parameter.html"><strong aria-hidden="true">4.6.2.</strong> Parameter</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/03_register.html"><strong aria-hidden="true">4.6.3.</strong> Register</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/04_combinational.html"><strong aria-hidden="true">4.6.4.</strong> Combinational</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/05_assign.html"><strong aria-hidden="true">4.6.5.</strong> Assign</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/06_function.html"><strong aria-hidden="true">4.6.6.</strong> Function</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/07_initial_final.html"><strong aria-hidden="true">4.6.7.</strong> Initial / Final</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/08_attribute.html"><strong aria-hidden="true">4.6.8.</strong> Attribute</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/09_generate.html"><strong aria-hidden="true">4.6.9.</strong> Generate</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/10_instantiation.html"><strong aria-hidden="true">4.6.10.</strong> Instantiation</a></li><li class="chapter-item "><a href="04_language_reference/06_declaration/11_named_block.html"><strong aria-hidden="true">4.6.11.</strong> Named Block</a></li></ol></li><li class="chapter-item "><a href="04_language_reference/07_module.html"><strong aria-hidden="true">4.7.</strong> Module</a></li><li class="chapter-item "><a href="04_language_reference/08_interface.html"><strong aria-hidden="true">4.8.</strong> Interface</a></li><li class="chapter-item "><a href="04_language_reference/09_package.html"><strong aria-hidden="true">4.9.</strong> Package</a></li><li class="chapter-item "><a href="04_language_reference/10_systemverilog_interoperation.html"><strong aria-hidden="true">4.10.</strong> SystemVerilog Interoperation</a></li><li class="chapter-item "><a href="04_language_reference/11_visibility.html"><strong aria-hidden="true">4.11.</strong> Visibility</a></li></ol></li><li class="chapter-item expanded "><a href="05_development_environment.html"><strong aria-hidden="true">5.</strong> Development Environment</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="05_development_environment/01_project_configuration.html"><strong aria-hidden="true">5.1.</strong> Project Configuration</a></li><li class="chapter-item "><a href="05_development_environment/02_dependencies.html"><strong aria-hidden="true">5.2.</strong> Dependencies</a></li><li class="chapter-item "><a href="05_development_environment/03_publish_project.html"><strong aria-hidden="true">5.3.</strong> Publish Project</a></li><li class="chapter-item "><a href="05_development_environment/04_directory_layout.html"><strong aria-hidden="true">5.4.</strong> Directory Layout</a></li><li class="chapter-item "><a href="05_development_environment/05_formatter.html"><strong aria-hidden="true">5.5.</strong> Formatter</a></li><li class="chapter-item "><a href="05_development_environment/06_linter.html"><strong aria-hidden="true">5.6.</strong> Linter</a></li><li class="chapter-item "><a href="05_development_environment/07_language_server.html"><strong aria-hidden="true">5.7.</strong> Language Server</a></li><li class="chapter-item "><a href="05_development_environment/08_compatibility.html"><strong aria-hidden="true">5.8.</strong> Compatibility</a></li><li class="chapter-item "><a href="05_development_environment/09_documentation.html"><strong aria-hidden="true">5.9.</strong> Documentation</a></li></ol></li><li class="chapter-item expanded "><a href="06_appendix.html"><strong aria-hidden="true">6.</strong> Appendix</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="06_appendix/01_formal_syntax.html"><strong aria-hidden="true">6.1.</strong> Formal Syntax</a></li><li class="chapter-item "><a href="06_appendix/02_semantic_error.html"><strong aria-hidden="true">6.2.</strong> Semantic Error</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Veryl Hardware Description Language</h1>

                    <div class="right-buttons">
                        <button id="language-toggle" class="icon-button" type="button"
                                title="Change language" aria-label="Change language"
                                aria-haspopup="true" aria-expanded="false"
                                aria-controls="language-list">
                            <i class="fa fa-globe"></i>
                        </button>
                        <ul id="language-list" class="theme-popup" aria-label="Languages" role="menu">
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="en">English</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="ja">日本語</a>
                          </button></li>
                        </ul>

                        <script>
                          let langToggle = document.getElementById("language-toggle");
                          let langList = document.getElementById("language-list");
                          langToggle.addEventListener("click", (event) => {
                              langList.style.display = langList.style.display == "block" ? "none" : "block";
                          });
                          let selectedLang = document.getElementById("en");
                          if (selectedLang) {
                              selectedLang.parentNode.classList.add("theme-selected");
                          }

                          // The path to the root, taking the current
                          // language into account.
                          let full_path_to_root = "";
                          // The page path (mdbook only gives us
                          // access to the path to the Markdown file).
                          let path = "print.md".replace(/\.md$/, ".html");
                          for (let lang of langList.querySelectorAll("a")) {
                              if (lang.id == "en") {
                                  lang.href = `${full_path_to_root}${path}`;
                              } else {
                                  lang.href = `${full_path_to_root}${lang.id}/${path}`;
                              }
                          }
                        </script>

                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-veryl-hardware-description-language"><a class="header" href="#the-veryl-hardware-description-language">The Veryl Hardware Description Language</a></h1>
<p><img src="https://github.com/dalance/veryl/raw/master/support/logo/veryl_wide.png" alt="Veryl" /></p>
<p>Veryl is a modern hardware description language which is designed as a “SystemVerilog Alternative”.
There are some design concepts.</p>
<h2 id="symplified-syntax"><a class="header" href="#symplified-syntax">Symplified Syntax</a></h2>
<p>Veryl has symplified syntax based on SystemVerilog / Rust.
“Symplified” has two meanings. One is for parser, and another is for human.</p>
<p>SystemVerilog has very complicated syntax (see IEEE Std 1800-2017 Annex A).
This causes difficulty of SystemVerilog tool implementation.
Veryl keeps simple syntax to make tool implementation easier.
So explicit syntax with keyword and symbol is adopted instead of context dependent syntax and shorthand notation.
For example, “off-side rule” like Python, “automatic semicolon insertion” like ECMAScript / Go will not be supported.</p>
<p>SystemVerilog has various syntax. Some syntaxes are inherited from Verilog, and some syntaxes are added from SystemVerilog.
Additionally some syntaxes can be written, but cannot be used actually because major EDA tools don’t support them.
So user should learn many syntaxes and whether each syntax can be used or not.
Veryl will not support old Verilog style, unrecommended description, and so on.</p>
<h2 id="transpiler-to-systemverilog"><a class="header" href="#transpiler-to-systemverilog">Transpiler to SystemVerilog</a></h2>
<p>HDL alternative languages should be transpiler to the tradisional HDLs like Verilog / VHDL because major EDA tools support them.
Veryl is a transpiler to SystemVerilog.</p>
<p>Transpiler to Verilog has wide EDA tool support including OSS EDA tools.
But even if there are rich data strucuture like <code>struct</code> / <code>interface</code> in HDL alternatives, transpiled Verilog can’t have it.
If HDL alternatives have rich code generateion mechanism, transpiled Verilog will be expanded to the very long code.
For these reason, debugging the transpiled code becomes difficult.</p>
<p>Veryl will has almost all the same semantics as SystemVerilog.
So transpiled code will be human readable SystemVerilog.</p>
<p>Additionally Veryl have interoperability with SystemVerilog.
Veryl can use SystemVerilog’s module / interface / struct / enum in the code, and vice versa.</p>
<h2 id="integrated-tools"><a class="header" href="#integrated-tools">Integrated Tools</a></h2>
<p>Modern programming languages have development support tools like linter, formatter, and language server by default.
Veryl will have them too from the beginning of development.</p>
<p>The following tools are planed to support.</p>
<ul>
<li>Linter</li>
<li>Formatter</li>
<li>Language server</li>
<li>Package manager</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<p>Let’s start to use Veryl. In this section, we will install Veryl, create an example project, and build it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>You can install Veryl by downloading binary.
If you have Rust development environment, you can use <code>cargo</code> instead of it.</p>
<h2 id="requirement"><a class="header" href="#requirement">Requirement</a></h2>
<p>Veryl uses <code>git</code> command internally. Please confirm <code>git</code> can be launched.</p>
<h2 id="choose-a-way-of-installation"><a class="header" href="#choose-a-way-of-installation">Choose a way of installation</a></h2>
<h3 id="download-binary"><a class="header" href="#download-binary">Download binary</a></h3>
<p>Download from <a href="https://github.com/dalance/veryl/releases/latest">release page</a>, and extract to the directory in PATH.</p>
<h3 id="cargo"><a class="header" href="#cargo">Cargo</a></h3>
<p>You can install with <a href="https://crates.io/crates/veryl">cargo</a>.</p>
<pre><code>cargo install veryl veryl-ls
</code></pre>
<h2 id="editor-integration"><a class="header" href="#editor-integration">Editor integration</a></h2>
<p><a href="https://azure.microsoft.com/ja-jp/products/visual-studio-code">Visual Studio Code</a> and <a href="https://github.com/vim/vim">Vim</a> / <a href="https://neovim.io">Neovim</a> are supported officially.</p>
<h3 id="visual-studio-code"><a class="header" href="#visual-studio-code">Visual Studio Code</a></h3>
<p>For Visual Studio Code, Veryl extension is provided.
The extension provides file type detection, syntex highlight and language server integration.
You can install it by searching “Veryl” in extension panel or the following URL.</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=dalance.vscode-veryl">Veryl extension for Visual Studio Code</a></p>
<h3 id="vim--neovim"><a class="header" href="#vim--neovim">Vim / Neovim</a></h3>
<p>For Vim / Neovim, Veryl plugin is provided.
The plugin provides file type detection, syntex highlight.
There are some instructions for plugin installation and language server integration in the following URL.</p>
<p><a href="https://github.com/dalance/veryl.vim">Vim / Neovim plugin</a></p>
<h3 id="other-editors"><a class="header" href="#other-editors">Other Editors</a></h3>
<p>Veryl provides language server. So other editors supporting language server (ex. Emacs) can use it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-world"><a class="header" href="#hello-world">Hello, World!</a></h1>
<h2 id="create-project"><a class="header" href="#create-project">Create Project</a></h2>
<p>At first, a new Veryl project can be created by:</p>
<pre><code>veryl new hello
</code></pre>
<p>After the command, the following directory and file will be created.</p>
<pre><code>$ veryl new hello
[INFO ]      Created "hello" project
$ cd hello
$ tree
.
`-- Veryl.toml

0 directories, 1 file
</code></pre>
<p><code>Veryl.toml</code> is the project configuration.</p>
<pre><code class="language-toml">[project]
name = "hello"
version = "0.1.0"
</code></pre>
<p>The description of all configuration is <a href="02_getting_started/../05_development_environment/01_project_configuration.html">here</a>.</p>
<h2 id="write-code"><a class="header" href="#write-code">Write Code</a></h2>
<p>You can add source codes at an arbitrary position in the project directory.
This is because Veryl project can be independent or integrated to other SystemVerilog project.
The extension of Veryl’s source codes is <code>.veryl</code>.</p>
<p>For example, put the following code to <code>src/hello.veryl</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    initial {
        $display("Hello, world!");
    }
}
</code></pre>
<pre><code>$ tree
.
|-- src
|   `-- hello.veryl
`-- Veryl.toml

1 directory, 2 files
</code></pre>
<blockquote>
<p>Note: Some source codes in the book have play button “▶” which will be appeared when mouse cursor is hovered at the code.
If you click the button, the transpiled SystemVerilog code will appear. Please try to click the button of <code>module ModuleA</code> code.</p>
</blockquote>
<h2 id="build-code"><a class="header" href="#build-code">Build Code</a></h2>
<p>You can generate a SystemVerilog code by <code>veryl build</code>.</p>
<pre><code>$ veryl build
[INFO ]   Processing file ([path to hello]/src/hello.veryl)
[INFO ]       Output filelist ([path to hello]/hello.f)
$ tree
.
|-- dependencies
|-- hello.f
|-- src
|   |-- hello.sv
|   `-- hello.veryl
`-- Veryl.toml

2 directories, 4 files
</code></pre>
<p>By default, SystemVerilog code will be generated at the same directory as Veryl code.
The generated code is <code>src/hello.sv</code>.</p>
<pre><code class="language-verilog">module hello_ModuleA;
    initial begin
        $display("Hello, world!");
    end
endmodule
</code></pre>
<p>Additionally, <code>hello.f</code> which is the filelist of generated codes will be generated.
You can use it for SystemVerilog compiler.
The following example is to use <a href="https://www.veripool.org/verilator/">Verilator</a>.</p>
<pre><code>$ verilator --cc -f hello.f
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="code-examples"><a class="header" href="#code-examples">Code Examples</a></h1>
<p>Veryl has the almost same semantics as SystemVerilog.
If you are used to SystemVerilog, you will guess Veryl semantics with a small example source code.</p>
<p>This is a small example.
In the following example, comments show the difference with SystemVerilog syntax.</p>
<pre><code class="language-veryl playground editable">module ModuleA (
    // name is first, and type is followed after `:`
    // bit width is represented by `&lt;&gt;`
    i_data: input  logic&lt;10&gt;,
    o_data: output logic&lt;10&gt;,

    // use `{}` instead of `begin`/`end`
) {
    assign o_data = i_data;
}
</code></pre>
<p>Additionally, the codeblocks in this chapter can be edit. Let’s try to edit and play each code.</p>
<p>A source code of Veryl has some <code>module</code>, <code>interface</code> and <code>package</code> like SystemVerilog.
In this chapter, we’ll show the some example source codes of them.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="module"><a class="header" href="#module">Module</a></h1>
<pre><code class="language-veryl playground editable">// module definition
module ModuleA #(
    parameter  ParamA: u32 = 10,
    localparam ParamB: u32 = 10, // trailing comma is allowed
) (
    i_clk : input  logic,
    i_rst : input  logic,
    i_sel : input  logic,
    i_data: input  logic&lt;ParamA&gt; [2], // `[]` means unpacked array in SystemVerilog
    o_data: output logic&lt;ParamA&gt;    , // `&lt;&gt;` means packed array in SystemVerilog
) {
    // localparam declaration
    //   `parameter` is not allowed in module
    localparam ParamC: u32 = 10;

    // variable declaration
    var r_data0: logic&lt;ParamA&gt;;
    var r_data1: logic&lt;ParamA&gt;;

    // always_ff statement with reset
    //   `always_ff` can take a mandatory clock and a optional reset
    //   `if_reset` means `if (i_rst)`. This conceals reset porality
    //   `()` of `if` is not required
    //   `=` in `always_ff` is non-blocking assignment
    always_ff (i_clk, i_rst) {
        if_reset {
            r_data0 = 0;
        } else if i_sel {
            r_data0 = i_data[0];
        } else {
            r_data0 = i_data[1];
        }
    }

    // always_ff statement without reset
    always_ff (i_clk) {
        r_data1 = r_data0;
    }

    assign o_data = r_data1;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="instantiation"><a class="header" href="#instantiation">Instantiation</a></h1>
<pre><code class="language-veryl playground editable">module ModuleA #(
    parameter  ParamA: u32 = 10,
) (
    i_clk : input  logic,
    i_rst : input  logic,
    i_data: input  logic&lt;ParamA&gt;,
    o_data: output logic&lt;ParamA&gt;,
) {
    var r_data1: logic&lt;ParamA&gt;;
    var r_data2: logic&lt;ParamA&gt;;

    assign r_data1 = i_data + 1;
    assign o_data  = r_data2 + 2;

    // instance declaration
    //   `inst` keyword starts instance declaration
    //   port connnection can be specified by `()`
    //   each port connection is `[port_name]:[variable]`
    //   `[port_name]` means `[port_name]:[port_name]`
    inst u_module_b: ModuleB (
        i_clk,
        i_rst,
        i_data: r_data1,
        o_data: r_data2,
    );

    // instance declaration with parameter override
    //   notation of parameter connection is the same as port
    inst u_module_c: ModuleC #(
        ParamA,
        ParamB: 10,
    ) (
        i_clk,
        i_rst,
        i_data: r_data1,
        o_data: r_data2,
    );
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interface"><a class="header" href="#interface">Interface</a></h1>
<pre><code class="language-veryl playground editable">// interface definition
interface InterfaceA #(
    parameter ParamA: u32 = 1,
    parameter ParamB: u32 = 1,
) {
    localparam ParamC: u32 = 1;

    var a: logic&lt;ParamA&gt;;
    var b: logic&lt;ParamA&gt;;
    var c: logic&lt;ParamA&gt;;

    // modport definition
    modport master {
        a: input ,
        b: input ,
        c: output,
    }

    modport slave {
        a: input ,
        b: input ,
        c: output,
    }
}

module ModuleA (
    i_clk     : input logic               ,
    i_rst     : input logic               ,
    // port declaration by modport
    intf_a_mst: modport InterfaceA::master,
    intf_a_slv: modport InterfaceA::slave ,
) {
    // interface instantiation
    inst u_intf_a: InterfaceA [10];
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="package"><a class="header" href="#package">Package</a></h1>
<pre><code class="language-veryl playground editable">// package definition
package PackageA {
    localparam ParamA: u32 = 1;
    localparam ParamB: u32 = 1;

    function FuncA (
        a: input  logic&lt;ParamA&gt;,
    ) -&gt; logic&lt;ParamA&gt; {
        return a + 1;
    }
}

module ModuleA {
    var a : logic&lt;10&gt; = PackageA::ParamA;
    var _b: logic&lt;10&gt; = PackageA::FuncA(a);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="language-reference"><a class="header" href="#language-reference">Language Reference</a></h1>
<p>In this chapter, we’ll discuss the lauguage definition of Veryl.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="source-code-structure"><a class="header" href="#source-code-structure">Source Code Structure</a></h1>
<p>Veryl’s source code is composed by some <code>module</code>, <code>interface</code> and <code>package</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
}

module ModuleB {
}

interface InterfaceA {
}

package PackageA {
}
</code></pre>
<p>The name of <code>module</code>, <code>interface</code> and <code>package</code> in the transpiled code will added project name as prefix.
In the sample code, <code>project_</code> will be added.
It is to avoid name conflict between projects.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lexical-structure"><a class="header" href="#lexical-structure">Lexical Structure</a></h1>
<p>This chapter shows the lexical structure of Veryl.
At the first, we’ll discuss about the general parts in it.</p>
<h2 id="encoding"><a class="header" href="#encoding">Encoding</a></h2>
<p>The encoding of Veryl source code should be UTF-8.</p>
<h2 id="white-space"><a class="header" href="#white-space">White Space</a></h2>
<p><code> </code>(white space), <code>\t</code> and <code>\n</code> are treated as white space.
All of them are skipped by Veryl’s parser.</p>
<h2 id="comment"><a class="header" href="#comment">Comment</a></h2>
<p>Single line comment and multi line comment can be used.
Almost all comment will be outputted at the transpiled code.</p>
<pre><code class="language-veryl playground">// single line comment

/*
multi

line

comment
*/
</code></pre>
<h3 id="documentation-comment"><a class="header" href="#documentation-comment">Documentation comment</a></h3>
<p>Signle line comment starts with <code>///</code> is treated as documentation comment.
Documentation comment is used for document generation.</p>
<pre><code class="language-veryl playground">/// documentation comment
</code></pre>
<h2 id="identifier"><a class="header" href="#identifier">Identifier</a></h2>
<p>Identifier is composed with ASCII alphabet and number and <code>_</code>.
Leading number is not allowed.
The following regular expression shows the definition.</p>
<pre><code>[a-zA-Z_][a-zA-Z0-9_]*
</code></pre>
<h2 id="string"><a class="header" href="#string">String</a></h2>
<p>String is surrounded by <code>"</code>.
Escape by <code>\</code> can be used like <code>\"</code>, <code>\n</code> and so on.</p>
<pre><code>"Hello, World!"
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operator"><a class="header" href="#operator">Operator</a></h1>
<p>Almost all operators are the same as SystemVerilog.
Please be careful the some differences.</p>
<ul>
<li><code>&lt;:</code> less than operator which is the same as <code>&lt;</code> in SystemVerilog.</li>
<li><code>&gt;:</code> greater than operator which is the same as <code>&gt;</code> in SystemVerilog.</li>
</ul>
<pre><code class="language-veryl">// unary arithmetic
a = +1;
a = -1;

// unary logical
a = !1;
a = ~1;

// unary reduce
a = &amp;1;
a = |1;
a = ^1;
a = ~&amp;1;
a = ~|1;
a = ~^1;
a = ^~1;

// binary arithmetic
a = 1 ** 1;
a = 1 * 1;
a = 1 / 1;
a = 1 % 1;
a = 1 + 1;
a = 1 - 1;

// binary shift
a = 1 &lt;&lt; 1;
a = 1 &gt;&gt; 1;
a = 1 &lt;&lt;&lt; 1;
a = 1 &gt;&gt;&gt; 1;

// binary compare
a = 1 &lt;: 1;
a = 1 &lt;= 1;
a = 1 &gt;: 1;
a = 1 &gt;= 1;
a = 1 == 1;
a = 1 != 1;
a = 1 === 1;
a = 1 !== 1;
a = 1 ==? 1;
a = 1 !=? 1;

// binary bitwise
a = 1 &amp; 1;
a = 1 ^ 1;
a = 1 ~^ 1;
a = 1 ^~ 1;
a = 1 | 1;

// binary logical
a = 1 &amp;&amp; 1;
a = 1 || 1;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="number"><a class="header" href="#number">Number</a></h1>
<h2 id="integer"><a class="header" href="#integer">Integer</a></h2>
<pre><code class="language-veryl">// integer
0123456789
01_23_45_67_89

// binary
32'b01xzXZ
32'b01_xz_XZ

// octal
32'o01234567xzXZ
32'o01_23_45_67_xz_XZ

// decimal
32'd0123456789
32'd01_23_45_67_89

// hex
128'h0123456789abcdefxzABCDEFXZ
128'h01_23_45_67_89_ab_cd_ef_xz_AB_CD_EF_XZ
</code></pre>
<h2 id="set-all-bits"><a class="header" href="#set-all-bits">Set all bits</a></h2>
<pre><code class="language-veryl">// all 0
'0

// all 1
'1

// all x
'x
'X

// all z
'z
'Z
</code></pre>
<h2 id="widthless-integer"><a class="header" href="#widthless-integer">Widthless integer</a></h2>
<p>The bit width specification of integer can be omitted.
If it is omitted, the appropriate width will be filled in the translated code.</p>
<pre><code class="language-veryl playground">module ModuleA {
    localparam a0: u64 = 'b0101;
    localparam a1: u64 = 'o01234567;
    localparam a2: u64 = 'd0123456789;
    localparam a3: u64 = 'h0123456789fffff;
}
</code></pre>
<h2 id="set-sized-bits"><a class="header" href="#set-sized-bits">Set sized bits</a></h2>
<p>The bit width specification can be added to “set all bits”.</p>
<pre><code class="language-veryl playground">module ModuleA {
    localparam a0: u64 = 1'0;
    localparam a1: u64 = 2'1;
    localparam a2: u64 = 3'x;
    localparam a3: u64 = 4'z;
}
</code></pre>
<h2 id="floating-point"><a class="header" href="#floating-point">Floating point</a></h2>
<pre><code class="language-veryl">// floating point
0123456789.0123456789
01_23_45_67_89.01_23_45_67_89

// floating with exponent
0123456789.0123456789e+0123456789
01_23_45_67_89.01_23_45_67_89E-01_23_45_67_89
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-type"><a class="header" href="#data-type">Data Type</a></h1>
<p>In this chapter, we’ll discuss about data type.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="builtin-type"><a class="header" href="#builtin-type">Builtin Type</a></h1>
<h2 id="4-state-data-type-which-has-variable-width"><a class="header" href="#4-state-data-type-which-has-variable-width">4-state data type which has variable width</a></h2>
<p><code>logic</code> is 4-state (<code>0</code>, <code>1</code>, <code>x</code>, <code>z</code>) data type.
The variable width can be specified by <code>&lt;&gt;</code> after <code>logic</code>.
Multi-dimentional can be specified by <code>&lt;X, Y, Z,,,&gt;</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: logic;
    var _b: logic&lt;10&gt;;
    var _c: logic&lt;10, 10&gt;;
}
</code></pre>
<h2 id="2-state-data-type-which-has-variable-width"><a class="header" href="#2-state-data-type-which-has-variable-width">2-state data type which has variable width</a></h2>
<p><code>bit</code> is 2-state (<code>0</code>, <code>1</code>) data type.
The variable width can be specified by <code>&lt;&gt;</code> after <code>bit</code>.
Multi-dimentional can be specified by <code>&lt;X, Y, Z,,,&gt;</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: bit;
    var _b: bit&lt;10&gt;;
    var _c: bit&lt;10, 10&gt;;
}
</code></pre>
<h2 id="integer-type"><a class="header" href="#integer-type">Integer type</a></h2>
<p>There are some integer types:</p>
<ul>
<li><code>u32</code>: 32bit unsigned integer</li>
<li><code>u64</code>: 64bit unsigned integer</li>
<li><code>i32</code>: 32bit signed integer</li>
<li><code>i64</code>: 64bit signed integer</li>
</ul>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: u32;
    var _b: u64;
    var _c: i32;
    var _d: i64;
}
</code></pre>
<h2 id="floating-point-type"><a class="header" href="#floating-point-type">Floating point type</a></h2>
<p>There are some floating point types:</p>
<ul>
<li><code>f32</code>: 32bit floating point</li>
<li><code>f64</code>: 64bit floating point</li>
</ul>
<p>Both of them are represented as described by IEEE Std 754.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: u32;
    var _b: u64;
    var _c: i32;
    var _d: i64;
}
</code></pre>
<h2 id="string-type"><a class="header" href="#string-type">String type</a></h2>
<p><code>string</code> is string type.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: string;
}
</code></pre>
<h2 id="type-type"><a class="header" href="#type-type">Type type</a></h2>
<p><code>type</code> is a type which represents type kind.
Variable of <code>type</code> can be defined as <code>parameter</code> or <code>localparam</code> only.</p>
<pre><code class="language-veryl playground">module ModuleA {
    localparam a: type = logic;
    localparam b: type = logic&lt;10&gt;;
    localparam c: type = u32;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="user-defined-type"><a class="header" href="#user-defined-type">User Defined Type</a></h1>
<h2 id="struct"><a class="header" href="#struct">Struct</a></h2>
<p><code>struct</code> is composite data type.
It can contain some fields, and these fields can be access through <code>.</code> operator.</p>
<pre><code class="language-veryl playground">module ModuleA {
    struct StructA {
        member_a: logic    ,
        member_b: logic&lt;10&gt;,
        member_c: u32      ,
    }

    var a: StructA;

    assign a.member_a = 0;
    assign a.member_b = 1;
    assign a.member_c = 2;
}
</code></pre>
<h2 id="enum"><a class="header" href="#enum">Enum</a></h2>
<p><code>enum</code> is enumerable type.
It has some named variant, and the value of <code>enum</code> can be set to the one of them.
The variant name can be specified by <code>[enum name]::[variant name]</code>.
Each variant has the corresponding integral value.
The value can be specified by <code>=</code>.
Otherwise, it is assigned automatically.</p>
<pre><code class="language-veryl playground">module A {
    enum EnumA: logic&lt;2&gt; {
        member_a,
        member_b,
        member_c = 3,
    }

    var a: EnumA;

    assign a = EnumA::member_a;
}
</code></pre>
<h2 id="union"><a class="header" href="#union">Union</a></h2>
<p>A Veryl <code>union</code> is a packed, untagged sum type and is transpiled to SystemVerilog’s <code>packed union</code>.
Each  union variant should have the same packed width as each other union variant.</p>
<pre><code class="language-veryl playground">module A {
    union UnionA {
        variant_a: logic&lt;8&gt;,
        variant_b: logic&lt;2, 4&gt;,
        variant_c: logic&lt;4, 2&gt;,
        variant_d: logic&lt;2, 2, 2&gt;,
    }
    var a: UnionA;
    assign a.variant_a = 8'haa;
}
</code></pre>
<h2 id="typedef"><a class="header" href="#typedef">Typedef</a></h2>
<p>The <code>type</code> keyword can be used to define a type alias to scalar or array types.</p>
<pre><code class="language-veryl playground">module A {
    type word_t = logic&lt;16&gt;;
    type regfile_t = word_t [16];
    type octbyte = bit&lt;8&gt; [8];
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="array"><a class="header" href="#array">Array</a></h1>
<p>Array can be defined by appending <code>[]</code> to any data type.
The length of array can be specified by the value in <code>[]</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic     [20];
    var b: logic&lt;10&gt; [20];
    var c: u32       [20];
    var d: StructA   [20];
    var e: EnumA     [20];

    assign a[0] = 0;
    assign b[0] = 0;
    assign c[0] = 0;
    assign d[0] = 0;
    assign e[0] = 0;
}
</code></pre>
<p>Multi-dimentional array can be defined by <code>[X, Y, Z,,,]</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic     [10, 20, 30];
    var b: logic&lt;10&gt; [10, 20, 30];
    var c: u32       [10, 20, 30];
    var d: StructA   [10, 20, 30];
    var e: EnumA     [10, 20, 30];

    assign a[0][0][0] = 0;
    assign b[0][0][0] = 0;
    assign c[0][0][0] = 0;
    assign d[0][0][0] = 0;
    assign e[0][0][0] = 0;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expression"><a class="header" href="#expression">Expression</a></h1>
<p>In this chapter, we’ll discuss about expression.
Expression is combination of variable, operator, function call, and so on.
It can be evaluated to a value.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operator-precedence"><a class="header" href="#operator-precedence">Operator Precedence</a></h1>
<p>In expression, operator precedence is almost the same as SystemVerilog.</p>
<div class="table-wrapper"><table><thead><tr><th>Operator</th><th>Associativity</th><th>Precedence</th></tr></thead><tbody>
<tr><td><code>()</code> <code>[]</code> <code>::</code> <code>.</code></td><td>Left</td><td>Highest</td></tr>
<tr><td><code>+</code> <code>-</code> <code>!</code> <code>~</code> <code>&amp;</code> <code>~&amp;</code> <code>|</code> <code>~|</code> <code>^</code> <code>~^</code> <code>^~</code> (unary)</td><td>Left</td><td></td></tr>
<tr><td><code>**</code></td><td>Left</td><td></td></tr>
<tr><td><code>*</code> <code>/</code> <code>%</code></td><td>Left</td><td></td></tr>
<tr><td><code>+</code> <code>-</code> (binary)</td><td>Left</td><td></td></tr>
<tr><td><code>&lt;&lt;</code> <code>&gt;&gt;</code> <code>&lt;&lt;&lt;</code> <code>&gt;&gt;&gt;</code></td><td>Left</td><td></td></tr>
<tr><td><code>&lt;:</code> <code>&lt;=</code> <code>&gt;:</code> <code>&gt;=</code></td><td>Left</td><td></td></tr>
<tr><td><code>==</code> <code>!=</code> <code>===</code> <code>!==</code> <code>==?</code> <code>!=?</code></td><td>Left</td><td></td></tr>
<tr><td><code>&amp;</code> (binary)</td><td>Left</td><td></td></tr>
<tr><td><code>^</code> <code>~^</code> <code>^~</code> (binary)</td><td>Left</td><td></td></tr>
<tr><td><code>|</code> (binary)</td><td>Left</td><td></td></tr>
<tr><td><code>&amp;&amp;</code></td><td>Left</td><td></td></tr>
<tr><td><code>||</code></td><td>Left</td><td></td></tr>
<tr><td><code>=</code> <code>+=</code> <code>-=</code> <code>*=</code> <code>/=</code> <code>%=</code> <code>&amp;=</code> <code>^=</code> <code>|=</code> <br> <code>&lt;&lt;=</code> <code>&gt;&gt;=</code> <code>&lt;&lt;&lt;=</code> <code>&gt;&gt;&gt;=</code></td><td>None</td><td></td></tr>
<tr><td><code>{}</code></td><td>None</td><td>Lowest</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="function-call"><a class="header" href="#function-call">Function Call</a></h1>
<p>Function can be call by <code>function_name(argument)</code>.
System function of SystemVerilog like <code>$clog2</code> can be used too.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: logic = PackageA::FunctionA(1, 1);
    var _b: logic = $clog2(1, 1);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="concatenation"><a class="header" href="#concatenation">Concatenation</a></h1>
<p><code>{}</code> represents bit concatenation.
In <code>{}</code>, <code>repeat</code> keyword can be used to repeat specified operand.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;
    var _c: logic = {a[9:0], b[4:3]};
    var _d: logic = {a[9:0] repeat 10, b repeat 4};
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="if"><a class="header" href="#if">If</a></h1>
<p>Conditional expression using <code>if</code> can be used.
The section which represents condition is placed after <code>if</code> keyword,
and <code>()</code> is not required surrounding it.
<code>else</code> is mandatory because if expression always have to be evaluated to value.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;

    assign b = if a == 0 {
        1
    } else if a &gt;: 1 {
        2
    } else {
        3
    };
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="case"><a class="header" href="#case">Case</a></h1>
<p>Another conditional expression is <code>case</code>.
<code>case</code> containts some arms like <code>expression: expression</code>.
If the expression after <code>case</code> keyword matches the left expression of an arm,
the right expression of the arm will be returned.
<code>default</code> is a special arm which will be returned when all other arms are failed.
<code>default</code> is mandatory because if expression always have to be evaluated to value.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;
    var c: logic&lt;10&gt;;

    assign b = case a {
        0      : 1,
        1      : 2,
        c - 1  : 4,
        default: 5,
    };
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bit-select"><a class="header" href="#bit-select">Bit Select</a></h1>
<p><code>[]</code> is bit select operator.
If an expression is specified to <code>[]</code>, single bit is selected.
Bit range selection can be specified by <code>[expression:expression]</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;
    var c: logic&lt;10&gt;;

    assign b = a[3];
    assign c = a[4:0];
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="range"><a class="header" href="#range">Range</a></h1>
<p>Range can be specified through range operator. There are two range operator:</p>
<ul>
<li><code>..</code>: half-open interval</li>
<li><code>..=</code>: closed interval</li>
</ul>
<p>Range can be used at some description like <code>for</code> statement.</p>
<pre><code class="language-veryl playground">module ModuleA {
    initial {
        for _i: u32 in 0..10 {
        }

        for _j: u32 in 0..=10 {
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="msb--lsb"><a class="header" href="#msb--lsb">Msb / Lsb</a></h1>
<p><code>msb</code> and <code>lsb</code> can be used in bit selection by <code>[]</code>.
<code>msb</code> means most significant bit of the operand.
<code>lsb</code> means least significant bit of the operand, it is the same as 0.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a : logic&lt;10&gt;;
    var _b: logic&lt;10&gt; = a[msb - 3:lsb];
    var _c: logic&lt;10&gt; = a[msb - 1:lsb + 1];
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inside--outside"><a class="header" href="#inside--outside">Inside / Outside</a></h1>
<p><code>inside</code> check the specified expression is inside conditions which are specified in <code>{}</code>.
Condition can be single expression or <a href="04_language_reference/04_expression/./07_range.html">range</a>.
If the expression matches any condition, <code>inside</code> will return <code>1</code>, otherwise <code>0</code>.
<code>outside</code> is vice versa.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic;
    var b: logic;

    assign a = inside 1 + 2 / 3 {0, 0..10, 1..=10};
    assign b = outside 1 * 2 - 1 {0, 0..10, 1..=10};
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="statement"><a class="header" href="#statement">Statement</a></h1>
<p>In this chapter, we’ll discuss about statement.
Statement can be used in some declaration like <code>always_ff</code>, <code>always_comb</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assignment"><a class="header" href="#assignment">Assignment</a></h1>
<p>Assignment statement is <code>variable = expression;</code>.
Unlike SystemVerilog, assignment operator is <code>=</code> in both <code>always_comb</code> and <code>always_ff</code>.
There are other assignment operators:</p>
<ul>
<li><code>+=</code>: addition assignment</li>
<li><code>-=</code>: subtraction assignment</li>
<li><code>*=</code>: multiplication assignment</li>
<li><code>/=</code>: division assignment</li>
<li><code>%=</code>: remainder assignment</li>
<li><code>&amp;=</code>: bitwise AND assignment</li>
<li><code>|=</code>: bitwise OR assignment</li>
<li><code>^=</code>: bitwise XOR assignment</li>
<li><code>&lt;&lt;=</code>: logical left shift assignment</li>
<li><code>&gt;&gt;=</code>: logical right shift assignment</li>
<li><code>&lt;&lt;&lt;=</code>: arithmetic left shift assignment</li>
<li><code>&gt;&gt;&gt;=</code>: arithmetic right shift assignment</li>
</ul>
<pre><code class="language-veryl playground">module ModuleA (
    i_clk: input logic,
) {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;
    var c: logic&lt;10&gt;;
    var d: logic&lt;10&gt;;
    var e: logic&lt;10&gt;;

    always_comb {
        b =  a + 1;
        c += a + 1;
    }

    always_ff (i_clk) {
        d =  a + 1;
        e -= a + 1;
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="function-call-1"><a class="header" href="#function-call-1">Function Call</a></h1>
<p>Function call can be used as statement.
In this case, the return value of function will be ignored.</p>
<pre><code class="language-veryl playground">module ModuleA {
    initial {
        $display("Hello, world!");
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="if-1"><a class="header" href="#if-1">If</a></h1>
<p><code>if</code> can be used as statement.
The difference from <code>if</code> expression is that statements are placed in <code>{}</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;

    always_comb {
        if a == 0 {
            b = 1;
        } else if a &gt;: 1 {
            b = 2;
        } else {
            b = 3;
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="case-1"><a class="header" href="#case-1">Case</a></h1>
<p><code>case</code> can be used as statement.
The right-hand of arm is statement.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;

    always_comb {
        case a {
            0: b = 1;
            1: b = 2;
            2: {
                b = 3;
                b = 3;
                b = 3;
            }
            default: b = 4;
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="for"><a class="header" href="#for">For</a></h1>
<p><code>for</code> statement represent repetition.
Loop variable is placed before <code>in</code> keyword,
and <a href="04_language_reference/05_statement/../04_expression/07_range.html">range</a> is placed after it.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;

    always_comb {
        for i: u32 in 0..10 {
            a += i;
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="return"><a class="header" href="#return">Return</a></h1>
<p><code>return</code> statement represents return from function.
The expression after <code>return</code> keyword is the return value of the function.</p>
<pre><code class="language-veryl playground">module ModuleA {
    function FunctionA () -&gt; u32 {
        return 0;
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="declaration"><a class="header" href="#declaration">Declaration</a></h1>
<p>In this chapter, we’ll discuss about declaration.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="variable"><a class="header" href="#variable">Variable</a></h1>
<p>Variable declaration is started by <code>var</code> keyword.
After <code>var</code>, variable name, <code>:</code>, and the type of the variable are followed.</p>
<p>If there are unused variables, warning will be occured.
Variable name starting with <code>_</code> means unused variable, and suppresses the warning.</p>
<p>Variable declaration with assignment can be used too.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: logic        ;
    var _b: logic&lt;10&gt;    ;
    var _c: logic&lt;10, 10&gt;;
    var _d: u32          ;
    var _e: logic        = 1;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parameter"><a class="header" href="#parameter">Parameter</a></h1>
<p>Parameter can be declarated as the same as variable.
<code>parameter</code> keyword can be used at module header, it can be overridden at instantiation.
<code>localparam</code> keyword can be used in module, it can’t be overridden.</p>
<pre><code class="language-veryl playground">module ModuleA #(
    parameter ParamA: u32 = 1,
) {
    localparam ParamB: u32 = 1;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="register"><a class="header" href="#register">Register</a></h1>
<p>If a variable is assigned in <code>always_ff</code> declaration, it becomes register variable.
Register variable will be mapped to flip-flop in synthesis phase.</p>
<p><code>always_ff</code> has mandatory clock variable, optional reset variable, and <code>{}</code> block.
Clock and reset are placed in <code>()</code>.</p>
<p><code>if_reset</code> is a special keyword which can be used in <code>always_ff</code>.
It means reset condition of the register variable.
If <code>if_reset</code> is used, <code>always_ff</code> must have reset variable.
<code>if_reset</code> can be conceal reset porality and synchronisity.
The actual porality and synchronisity can be configured through <code>[build]</code> section of <code>Veryl.toml</code>.</p>
<pre><code class="language-veryl playground">module ModuleA (
    i_clk: input logic,
    i_rst: input logic,
) {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;

    always_ff (i_clk) {
        a = 1;
    }

    always_ff (i_clk, i_rst) {
        if_reset {
            b = 0;
        } else {
            b = 1;
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="combinational"><a class="header" href="#combinational">Combinational</a></h1>
<p>If a variable is assigned in <code>always_comb</code> declaration, it means combinational circuit.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;

    always_comb {
        b = a + 1;
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assign"><a class="header" href="#assign">Assign</a></h1>
<p><code>assign</code> declaration can assign expression to variable.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;

    assign a = 1;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="function"><a class="header" href="#function">Function</a></h1>
<p>Function can be declared by <code>function</code> keyword.
Arguments are placed in <code>()</code> and return type is placed after <code>-&gt;</code>.</p>
<p>If function doesn’t have a return value, <code>-&gt;</code> can be omitted.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;

    function FunctionA (
        a: input logic&lt;10&gt;
    ) -&gt; logic&lt;10&gt; {
        return a + 1;
    }

    function FunctionB (
        a: input logic&lt;10&gt;
    ) {
    }

    assign b = FunctionA(a);

    initial {
        FunctionB(a);
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="initial--final"><a class="header" href="#initial--final">Initial / Final</a></h1>
<p>Statements in <code>initial</code> are executed at the beginning of simulation,
<code>final</code> is the end.
Both will be ignored logical synthesis, and can be used as debug or assertion.</p>
<pre><code class="language-veryl playground">module ModuleA {
    initial {
        $display("initial");
    }

    final {
        $display("final");
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="attribute"><a class="header" href="#attribute">Attribute</a></h1>
<p>Attribute can annotate some declarations like variable declaration.</p>
<h2 id="sv-attribute"><a class="header" href="#sv-attribute">SV Attribute</a></h2>
<p>SV attribute represents SystemVerilog attribute.
It will be transpiled to SystemVerilog attribute <code>(*  *)</code>.</p>
<pre><code class="language-veryl playground">module ModuleA {
    #[sv("ram_style=\"block\"")]
    var _a: logic&lt;10&gt;;
    #[sv("mark_debug=\"true\"")]
    var _b: logic&lt;10&gt;;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generate"><a class="header" href="#generate">Generate</a></h1>
<p>Declaration can be generated by <code>for</code> and <code>if</code>.
Label which is shown by <code>:</code> is required to idenfity the generated declarations.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var a: logic&lt;10&gt;;

    for i in 0..10 :label {
        if i &gt;: 5 :label {
            assign a[i] = i + 2;
        } else { // label of else clause can be omit
            assign a[i] = i + 2;
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="instantiation-1"><a class="header" href="#instantiation-1">Instantiation</a></h1>
<p><code>inst</code> keyword represents instantiation of modula and interface.
The name of instance is placed after <code>inst</code> keyword,
and the type of instance is placed after <code>:</code>.
Parameter override is <code>#()</code>, and port connection is <code>()</code>.</p>
<pre><code class="language-veryl playground">module ModuleA #(
    parameter paramA: u32 = 1,
) {
    var a: logic&lt;10&gt;;
    var b: logic&lt;10&gt;;

    inst instB: ModuleB #(
        paramA    , // Parameter assignment by name
        paramB: 10,
    ) (
        a    , // Port connection by name
        bb: b,
    );
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="named-block"><a class="header" href="#named-block">Named Block</a></h1>
<p>Label can be added to <code>{}</code> block.
The named block has an individual namespace.</p>
<pre><code class="language-veryl playground">module ModuleA {
    :labelA {
        var _a: logic&lt;10&gt;;
    }

    :labelB {
        var _a: logic&lt;10&gt;;
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="module-1"><a class="header" href="#module-1">Module</a></h1>
<p>Module is one of top level components in source code.
Module has overridable parameters, connection ports, and internal logic.</p>
<p>Overridable parameters can be declared in <code>#()</code>.
Each parameter declaration is started by <code>parameter</code> keyword.
After the keyword, an identifier, <code>:</code>, the type of the parameter, and a default value are placed.</p>
<p>Connection ports can be declared in <code>()</code>.
Each port declaration is constructed by an identifier, <code>:</code>, port direction, and the type of the port.
The available port directions are:</p>
<ul>
<li><code>input</code>: input port</li>
<li><code>output</code>: output port</li>
<li><code>inout</code>: bi-directional port</li>
<li><code>modport</code>: modport of interface</li>
</ul>
<pre><code class="language-veryl playground">module ModuleA #(
    parameter ParamA: u32 = 0,
    parameter ParamB: u32 = 0,
) (
    a: input  logic,
    b: input  logic,
    c: input  logic,
    x: output logic,
) {
    always_comb {
        if c {
            x = a;
        } else {
            x = b;
        }
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interface-1"><a class="header" href="#interface-1">Interface</a></h1>
<p>Interface is one of top level components in source code.
Interface has overridable parameters, and interface definitions.</p>
<p>Overridable parameters are the same as them of module.</p>
<p>In interface definitions, <code>modport</code> can be declared.
<code>modport</code> can be used as bundled port connection at the port declaration of module.</p>
<pre><code class="language-veryl playground">interface InterfaceA #(
    parameter ParamA: u32 = 0,
    parameter ParamB: u32 = 0,
) {
    var a: logic;
    var b: logic;

    modport master {
        a: output,
        b: input ,
    }

    modport slave {
        b: input ,
        a: output,
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="package-1"><a class="header" href="#package-1">Package</a></h1>
<p>Package is one of top level components in source code.
Package can organize some declarations like parameter and function.</p>
<p>To access an item in a package, <code>::</code> symbol can be used like <code>PackageA::ParamA</code>.</p>
<pre><code class="language-veryl playground">package PackageA {
    localparam ParamA: u32 = 0;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="systemverilog-interoperation"><a class="header" href="#systemverilog-interoperation">SystemVerilog Interoperation</a></h1>
<p>If you want to access to items of SystemVerilog, <code>$sv</code> namespace can be used.
For example, “ModuleA” in SystemVerilog source code can be accessed by <code>$sv::ModuleA</code>.
Veryl don’t check the existence of the items.</p>
<pre><code class="language-veryl playground">module ModuleA {
    var _a: logic = $sv::PackageA::ParamA;

    inst b: $sv::ModuleB ();
    inst c: $sv::InterfaceC ();
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visibility"><a class="header" href="#visibility">Visibility</a></h1>
<p>By default, all top level items of a project (module, interface and package) are private.
The “private” means they are not visible from other project.</p>
<p><code>pub</code> keyword can be used to specify an item as public to other project.
<code>veryl doc</code> will generate <a href="04_language_reference/../05_development_environment/09_documentation.html">documents</a> of public items only.</p>
<pre><code class="language-veryl playground">pub module ModuleA {
}

pub interface InterfaceA {
}

pub package PackageA {
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development-environment"><a class="header" href="#development-environment">Development Environment</a></h1>
<p>In this chapter, we’ll discuss about development environment including project configuration and development tools.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="project-configuration"><a class="header" href="#project-configuration">Project Configuration</a></h1>
<ul>
<li><a href="05_development_environment/01_project_configuration.html#the-project-section"><code>[project]</code></a> — Defines a project.
<ul>
<li><a href="05_development_environment/01_project_configuration.html#the-name-field"><code>name</code></a> — The name of the project.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-version-field"><code>version</code></a> — The version of the project.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-authors-field"><code>authors</code></a> — The authors of the project.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-description-field"><code>description</code></a> — A description of the project.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-license-field"><code>license</code></a> — The project license.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-repository-field"><code>repository</code></a> — URL of the project source repository.</li>
</ul>
</li>
<li><a href="05_development_environment/01_project_configuration.html#the-build-section"><code>[build]</code></a> — Build settings.
<ul>
<li><a href="05_development_environment/01_project_configuration.html#the-clock_type-field"><code>clock_type</code></a> — The type of clock.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-reset_type-field"><code>reset_type</code></a> — The type of reset.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-filelist_type-field"><code>filelist_type</code></a> — The type of filelist.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-target-field"><code>target</code></a> — The way of output.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-implicit_parameter_types-field"><code>implicit_parameter_types</code></a> — Whether implicit parameter type is enabled.</li>
</ul>
</li>
<li><a href="05_development_environment/01_project_configuration.html#the-format-section"><code>[format]</code></a> — Format settings.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-lint-section"><code>[lint]</code></a> — Lint settings.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-publish-section"><code>[publish]</code></a> — Publish settings.</li>
<li><a href="05_development_environment/01_project_configuration.html#the-dependencies-section"><code>[dependencies]</code></a> — Library dependencies.</li>
</ul>
<h2 id="the-project-section"><a class="header" href="#the-project-section">The <code>[project]</code> section</a></h2>
<p>The first section of <code>Veryl.toml</code> is <code>[project]</code>.
The mandatory fields are <code>name</code> and <code>version</code>.</p>
<h3 id="the-name-field"><a class="header" href="#the-name-field">The <code>name</code> field</a></h3>
<p>The project name is used as prefix in the generated codes.
So the name must start with alphabet or <code>_</code>, and use only alphanumeric charaters or <code>_</code>.</p>
<h3 id="the-version-field"><a class="header" href="#the-version-field">The <code>version</code> field</a></h3>
<p>The project version should follow <a href="https://semver.org/">Semantic Versioning</a>.
The version is constructed by the following three numbers.</p>
<ul>
<li>Major – increment at incompatible changes</li>
<li>Minor – increment at adding features with backward compatibility</li>
<li>Patch – increment at bug fixes with backward compatibility</li>
</ul>
<pre><code class="language-toml">[project]
version = "0.1.0"
</code></pre>
<h3 id="the-authors-field"><a class="header" href="#the-authors-field">The <code>authors</code> field</a></h3>
<p>The optional <code>authors</code> field lists in an array the people or organizations that are considered the “authors” of the project.
The format of each string in the list is free. Name only, e-mail address only, and name with e-mail address included within angled brackets are commonly used.</p>
<pre><code class="language-toml">[project]
authors = ["Fnu Lnu", "anonymous@example.com", "Fnu Lnu &lt;anonymous@example.com&gt;"]
</code></pre>
<h3 id="the-description-field"><a class="header" href="#the-description-field">The <code>description</code> field</a></h3>
<p>The <code>description</code> is a short blurb about the project. This should be plane text (not Markdown).</p>
<h3 id="the-license-field"><a class="header" href="#the-license-field">The <code>license</code> field</a></h3>
<p>The <code>license</code> field contains the name of license that the project is released under.
The string should be follow <a href="https://spdx.github.io/spdx-spec/v2.3/SPDX-license-expressions">SPDX 2.3 license expression</a>.</p>
<pre><code class="language-toml">[project]
license = "MIT OR Apache-2.0"
</code></pre>
<h3 id="the-repository-field"><a class="header" href="#the-repository-field">The <code>repository</code> field</a></h3>
<p>The <code>repository</code> field should be a URL to the source repository for the project.</p>
<pre><code class="language-toml">[project]
repository = "https://github.com/dalance/veryl"
</code></pre>
<h2 id="the-build-section"><a class="header" href="#the-build-section">The <code>[build]</code> section</a></h2>
<p>The <code>[build]</code> section contains the configurations of code generation.</p>
<h3 id="the-clock_type-field"><a class="header" href="#the-clock_type-field">The <code>clock_type</code> field</a></h3>
<p>The <code>clock_type</code> field specifies which clock edge is used to drive flip-flop.
The available types are below:</p>
<ul>
<li><code>posedge</code> – positive edge</li>
<li><code>negedge</code> – negetive edge</li>
</ul>
<h3 id="the-reset_type-field"><a class="header" href="#the-reset_type-field">The <code>reset_type</code> field</a></h3>
<p>The <code>reset_type</code> field specifies reset polarity and synchronisity.
The available types are below:</p>
<ul>
<li><code>async_low</code> – asynchronous and active low</li>
<li><code>async_high</code> – asynchronous and active high</li>
<li><code>sync_low</code> – synchronous and active low</li>
<li><code>sync_high</code> – synchronous and active high</li>
</ul>
<h3 id="the-filelist_type-field"><a class="header" href="#the-filelist_type-field">The <code>filelist_type</code> field</a></h3>
<p>The <code>filelist_type</code> field specifies filelist format.
The available types are below:</p>
<ul>
<li><code>absolute</code> – plane text filelist including absolute file paths</li>
<li><code>relative</code> – plane text filelist including relative file paths</li>
<li><code>flgen</code> – <a href="https://github.com/pezy-computing/flgen">flgen</a> filelist</li>
</ul>
<h3 id="the-target-field"><a class="header" href="#the-target-field">The <code>target</code> field</a></h3>
<p>The <code>target</code> field specifies where the generated codes will be placed at.
The available types are below:</p>
<ul>
<li><code>source</code> – as the same directory as the source code</li>
<li><code>directory</code> – specified directory</li>
</ul>
<p>If you want to use <code>directory</code>, you can specify the target directory by <code>path</code> key.</p>
<pre><code class="language-toml">[build]
target = {type = "directory", path = "[dst dir]"}
</code></pre>
<h3 id="the-implicit_parameter_types-field"><a class="header" href="#the-implicit_parameter_types-field">The <code>implicit_parameter_types</code> field</a></h3>
<p>The <code>implicit_parameter_types</code> field lists the types which will be elided in <code>parameter</code> declaration of the generated codes.
This is because some EDA tools don’t support <code>parameter</code> declaration with specific types (ex.<code>string</code>).
If you want to elide <code>string</code>, you can specify like below:</p>
<pre><code class="language-toml">[build]
implicit_parameter_types = ["string"]
</code></pre>
<h2 id="the-format-section"><a class="header" href="#the-format-section">The <code>[format]</code> section</a></h2>
<p>The <code>[format]</code> section contains the configurations of code formatter.
Available configurations is <a href="05_development_environment/./05_formatter.html">here</a>.</p>
<h2 id="the-lint-section"><a class="header" href="#the-lint-section">The <code>[lint]</code> section</a></h2>
<p>The <code>[lint]</code> section contains the configurations of linter.
Available configurations is <a href="05_development_environment/./06_linter.html">here</a>.</p>
<h2 id="the-publish-section"><a class="header" href="#the-publish-section">The <code>[publish]</code> section</a></h2>
<p>The <code>[publish]</code> section contains the configurations of publishing.
Available configurations is <a href="05_development_environment/./03_publish_project.html">here</a>.</p>
<h2 id="the-dependencies-section"><a class="header" href="#the-dependencies-section">The <code>[dependencies]</code> section</a></h2>
<p>The <code>[dependencies]</code> section contains library dependencies.
Available configurations is <a href="05_development_environment/./02_dependencies.html">here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h1>
<p>If you want to add other Veryl projects to dependencies of your project, you can add them to <code>[dependencies]</code> section in <code>Veryl.toml</code>.
The left hand side of entry is path to the dependency, and the right hand side is version.</p>
<pre><code class="language-toml">[dependencies]
"https://github.com/dalance/veryl_sample" = "0.1.0"
</code></pre>
<p>By default, the namespace of the dependency is the same as the project name of the dependency.
If you want to specify namespace, you can use <code>name</code> field.</p>
<pre><code class="language-toml">[dependencies]
"https://github.com/dalance/veryl_sample" = {version = "0.1.0", name = "veryl_sample_alt"}
</code></pre>
<p>If you want to use many versions of the same dependency path, you can specify each name.</p>
<pre><code class="language-toml">[dependencies]
"https://github.com/dalance/veryl_sample" = [
    {version = "0.1.0", name = "veryl_sample1"},
    {version = "0.2.0", name = "veryl_sample2"},
]
</code></pre>
<h2 id="usage-of-dependency"><a class="header" href="#usage-of-dependency">Usage of dependency</a></h2>
<p>After adding dependencies to <code>Veryl.toml</code>, you can use <code>moudle</code>, <code>interface</code> and <code>package</code> in the dependencies.
The following example uses <code>delay</code> module in the <code>veryl_sample</code> dependency.</p>
<pre><code class="language-veryl playground">module ModuleA (
    i_clk  : input  logic,
    i_rst_n: input  logic,
    i_d    : input  logic,
    o_d    : output logic,
) {
    inst u_delay: veryl_sample::delay (
        i_clk  ,
        i_rst_n,
        i_d    ,
        o_d    ,
    );
}
</code></pre>
<blockquote>
<p>Note: The result of play button in the above code is not exact because it doesn’t use dependency resolution.
Actually the module name becomes <code>veryl_samlle_delay</code></p>
</blockquote>
<h2 id="version-requirement"><a class="header" href="#version-requirement">Version Requirement</a></h2>
<p>The <code>version</code> field of <code>[dependencies]</code> section shows version requirement.
For example, <code>version = "0.1.0"</code> means the latest version which has compatibility with <code>0.1.0</code>.
The compatibility is judged by <a href="https://semver.org/">Semantic Versioning</a>.
A version is constructed from the following three parts.</p>
<ul>
<li><code>MAJOR</code> version when you make incompatible API changes</li>
<li><code>MINOR</code> version when you add functionality in a backwards compatible manner</li>
<li><code>PATCH</code> version when you make backwards compatible bug fixes</li>
</ul>
<p>If <code>MAJOR</code> version is <code>0</code>, <code>MINOR</code> is interpreted as incompatible changes.</p>
<p>If there are <code>0.1.0</code> and <code>0.1.1</code> and <code>0.2.0</code>, <code>0.1.1</code> will be selected.
This is because</p>
<ul>
<li><code>0.1.0</code> is compatible with <code>0.1.0</code>.</li>
<li><code>0.1.1</code> is compatible with <code>0.1.0</code>.</li>
<li><code>0.2.0</code> is not compatible with <code>0.1.0</code>.</li>
<li><code>0.1.1</code> is the latest in the compatible versions.</li>
</ul>
<p>The <code>version</code> field allows other version requirement reprensentation like <code>=0.1.0</code>.
Please see version requirement of Rust for detailed information: <a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html#specifying-dependencies-from-cratesio">Specifying Dependencies</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="publish-project"><a class="header" href="#publish-project">Publish Project</a></h1>
<p>To publish your project, <code>veryl publish</code> can be used.
Publising means to associate a version with a git revision.</p>
<pre><code>$ veryl publish
[INFO ]   Publishing release (0.2.1 @ 297bc6b24c5ceca9e648c3ea5e01011c67d7efe7)
[INFO ]      Writing metadata ([path to project]/Veryl.pub)
</code></pre>
<p><code>veryl publish</code> generates <code>Veryl.pub</code> which contains published version information like below.</p>
<pre><code class="language-toml">[[releases]]
version = "0.2.1"
revision = "297bc6b24c5ceca9e648c3ea5e01011c67d7efe7"
</code></pre>
<p>After generating <code>Veryl.pub</code>, publishing sequence is completed by git add, commit and push.
The git branch to be committed must be the default branch because Veryl search <code>Veryl.pub</code> in the default branch.</p>
<pre><code>$ git add Veryl.pub
$ git commit -m "Publish"
$ git push
</code></pre>
<p>If you enable automatic commit by <code>publish_commit</code> in <code>[publish]</code> section of <code>Veryl.toml</code>, git add and commit will be executed after publish.</p>
<pre><code>$ veryl publish
[INFO ]   Publishing release (0.2.1 @ 297bc6b24c5ceca9e648c3ea5e01011c67d7efe7)
[INFO ]      Writing metadata ([path to project]/Veryl.pub)
[INFO ]   Committing metadata ([path to project]/Veryl.pub)
</code></pre>
<h3 id="version-bump"><a class="header" href="#version-bump">Version Bump</a></h3>
<p>You can bump version with publish at the same time by <code>--bump</code> option.
As the same as publish, <code>bump_commit</code> in <code>[publish]</code> section of <code>Veryl.toml</code> can specify automatic commit after bump version.</p>
<pre><code>$ veryl publish --bump patch
[INFO ]      Bumping version (0.2.1 -&gt; 0.2.2)
[INFO ]     Updating version field ([path to project]/Veryl.toml)
[INFO ]   Committing metadata ([path to project]/Veryl.toml)
[INFO ]   Publishing release (0.2.2 @ 159dee3b3f93d3a999d8bac4c6d26d51476b178a)
[INFO ]      Writing metadata ([path to project]/Veryl.pub)
[INFO ]   Committing metadata ([path to project]/Veryl.pub)
</code></pre>
<h3 id="configuration"><a class="header" href="#configuration">Configuration</a></h3>
<pre><code class="language-toml">[publish]
bump_commit = true
bump_commit_message = "Bump"
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Configuration</th><th>Value</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td>bump_commit</td><td>boolean</td><td>false</td><td>automatic commit after bump</td></tr>
<tr><td>publish_commit</td><td>boolean</td><td>false</td><td>automatic commit after publish</td></tr>
<tr><td>bump_commit_mesasge</td><td>string</td><td>“chore: Bump version”</td><td>commit message after bump</td></tr>
<tr><td>publish_commit_mesasge</td><td>string</td><td>“chore: Publish”</td><td>commit message after publish</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="directory-layout"><a class="header" href="#directory-layout">Directory Layout</a></h1>
<p>Veryl supports arbitrary directory layout.
This is because the optimal directory layout for an independent project and an integrated project within other projects is different.</p>
<p>In this section, we suggest some directory layout patterns.</p>
<h2 id="single-source-directory"><a class="header" href="#single-source-directory">Single source directory</a></h2>
<p>This pattern contains all sources in <code>src</code> directory.
In <code>src</code>, you can configure arbitrary sub directories.</p>
<pre><code>$ tree
.
|-- src
|   |-- module_a.veryl
|   `-- module_b
|       |-- module_b.veryl
|       `-- module_c.veryl
`-- Veryl.toml

2 directories, 4 files
</code></pre>
<p>Veryl gathers all <code>*.veryl</code> files and generates codes at the same directory as the source by default.
You can show the behaviour explicitly by the following configuration.</p>
<pre><code class="language-toml">[build]
target = "source"
</code></pre>
<p>After <code>veryl build</code>, the directory structure will become below:</p>
<pre><code>$ tree
.
|-- dependencies
|-- prj.f
|-- src
|   |-- module_a.sv
|   |-- module_a.veryl
|   `-- module_b
|       |-- module_b.sv
|       |-- module_b.veryl
|       |-- module_c.sv
|       `-- module_c.veryl
`-- Veryl.toml

3 directories, 8 files
</code></pre>
<h2 id="single-source-and-target-directory"><a class="header" href="#single-source-and-target-directory">Single source and target directory</a></h2>
<p>If you want to place the generated codes into a directory, you can use <code>target</code> configure in <code>[build]</code> section of <code>Veryl.toml</code>.</p>
<pre><code class="language-toml">[build]
target = {type = "directory", path = "target"}
</code></pre>
<p>The directory layout of this configure will become below:</p>
<pre><code>$ tree
.
|-- dependencies
|-- prj.f
|-- src
|   |-- module_a.veryl
|   `-- module_b
|       |-- module_b.veryl
|       `-- module_c.veryl
|-- target
|   |-- module_a.sv
|   |-- module_b.sv
|   `-- module_c.sv
`-- Veryl.toml

4 directories, 8 files
</code></pre>
<h2 id="multi-source-directory"><a class="header" href="#multi-source-directory">Multi source directory</a></h2>
<p>If you want to add a veryl project to the existing SystemVerilog project, you can choose the following structure.</p>
<pre><code>$ tree
.
|-- dependencies
|-- module_a
|   |-- module_a.sv
|   `-- module_a.veryl
|-- module_b
|   |-- module_b.sv
|   |-- module_b.veryl
|   |-- module_c.sv
|   `-- module_c.veryl
|-- prj.f
|-- sv_module_x
|   `-- sv_module_x.sv
|-- sv_module_y
|   `-- sv_module_y.sv
`-- Veryl.toml

5 directories, 10 files
</code></pre>
<p>The generated <code>prj.f</code> lists all generated files. So you can use it along with the existing SystemVerilog filelists.</p>
<h2 id="about-gitignore"><a class="header" href="#about-gitignore">About <code>.gitignore</code></a></h2>
<p>Veryl doesn’t provide the default <code>.gitignore</code>.
This is because which files should be ignored is different by each projects.</p>
<p>The candidates of <code>.gitignore</code> is below:</p>
<ul>
<li><code>dependencies/</code></li>
<li><code>target/</code></li>
<li><code>*.sv</code></li>
<li><code>*.f</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="formatter"><a class="header" href="#formatter">Formatter</a></h1>
<p>Source code can be formatted by <code>veryl fmt</code> command.
Alternatively, language server support formatting through <code>textDocument/formatting</code> request.</p>
<p>The available configurations are below.
These can be specified in <code>[format]</code> section of <code>Veryl.toml</code>.</p>
<pre><code class="language-toml">[format]
indent_width = 4
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Configuration</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td>indent_width</td><td>integer</td><td>indent width by space</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="linter"><a class="header" href="#linter">Linter</a></h1>
<p>Lint check is executed at <code>veryl check</code> or <code>veryl build</code>.
Alternatively, language server checks lint in real time.</p>
<p>The available configurations are below.
These can be specified in <code>[lint]</code> section of <code>Veryl.toml</code>.</p>
<pre><code class="language-toml">[lint.naming]
case_enum = "snake"
</code></pre>
<h2 id="the-lintnaming-section"><a class="header" href="#the-lintnaming-section">The <code>[lint.naming]</code> section</a></h2>
<p>This section contains configurations of naming conventions.</p>
<div class="table-wrapper"><table><thead><tr><th>Configuration</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td>case_enum</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>enum</code></td></tr>
<tr><td>case_function</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>function</code></td></tr>
<tr><td>case_instance</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of instance</td></tr>
<tr><td>case_interface</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>interface</code></td></tr>
<tr><td>case_modport</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>modport</code></td></tr>
<tr><td>case_module</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>module</code></td></tr>
<tr><td>case_package</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>package</code></td></tr>
<tr><td>case_parameter</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>parameter</code></td></tr>
<tr><td>case_port_inout</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>inout</code> port</td></tr>
<tr><td>case_port_input</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>input</code> port</td></tr>
<tr><td>case_port_modport</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>modport</code> port</td></tr>
<tr><td>case_port_output</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>output</code> port</td></tr>
<tr><td>case_reg</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of register type variable<sup class="footnote-reference"><a href="#reg">2</a></sup></td></tr>
<tr><td>case_struct</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of <code>struct</code></td></tr>
<tr><td>case_wire</td><td>case type<sup class="footnote-reference"><a href="#casetype">1</a></sup></td><td>case style of wire type variable<sup class="footnote-reference"><a href="#wire">3</a></sup></td></tr>
<tr><td>prefix_enum</td><td>string</td><td>prefix of <code>enum</code></td></tr>
<tr><td>prefix_function</td><td>string</td><td>prefix of <code>function</code></td></tr>
<tr><td>prefix_instance</td><td>string</td><td>prefix of instance</td></tr>
<tr><td>prefix_interface</td><td>string</td><td>prefix of <code>interface</code></td></tr>
<tr><td>prefix_modport</td><td>string</td><td>prefix of <code>modport</code></td></tr>
<tr><td>prefix_module</td><td>string</td><td>prefix of <code>module</code></td></tr>
<tr><td>prefix_package</td><td>string</td><td>prefix of <code>package</code></td></tr>
<tr><td>prefix_parameter</td><td>string</td><td>prefix of <code>parameter</code></td></tr>
<tr><td>prefix_port_inout</td><td>string</td><td>prefix of <code>inout</code> port</td></tr>
<tr><td>prefix_port_input</td><td>string</td><td>prefix of <code>input</code> port</td></tr>
<tr><td>prefix_port_modport</td><td>string</td><td>prefix of <code>modport</code> port</td></tr>
<tr><td>prefix_port_output</td><td>string</td><td>prefix of <code>output</code> port</td></tr>
<tr><td>prefix_reg</td><td>string</td><td>prefix of register type variable<sup class="footnote-reference"><a href="#reg">2</a></sup></td></tr>
<tr><td>prefix_struct</td><td>string</td><td>prefix of <code>struct</code></td></tr>
<tr><td>prefix_wire</td><td>string</td><td>prefix of wire type variable<sup class="footnote-reference"><a href="#wire">3</a></sup></td></tr>
<tr><td>re_forbidden_enum</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>enum</code></td></tr>
<tr><td>re_forbidden_function</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>function</code></td></tr>
<tr><td>re_forbidden_instance</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of instance</td></tr>
<tr><td>re_forbidden_interface</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>interface</code></td></tr>
<tr><td>re_forbidden_modport</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>modport</code></td></tr>
<tr><td>re_forbidden_module</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>module</code></td></tr>
<tr><td>re_forbidden_package</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>package</code></td></tr>
<tr><td>re_forbidden_parameter</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>parameter</code></td></tr>
<tr><td>re_forbidden_port_inout</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>inout</code> port</td></tr>
<tr><td>re_forbidden_port_input</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>input</code> port</td></tr>
<tr><td>re_forbidden_port_modport</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>modport</code> port</td></tr>
<tr><td>re_forbidden_port_output</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>output</code> port</td></tr>
<tr><td>re_forbidden_reg</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of register type variable<sup class="footnote-reference"><a href="#reg">2</a></sup></td></tr>
<tr><td>re_forbidden_struct</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of <code>struct</code></td></tr>
<tr><td>re_forbidden_wire</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex forbidden of wire type variable<sup class="footnote-reference"><a href="#wire">3</a></sup></td></tr>
<tr><td>re_required_enum</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>enum</code></td></tr>
<tr><td>re_required_function</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>function</code></td></tr>
<tr><td>re_required_instance</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of instance</td></tr>
<tr><td>re_required_interface</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>interface</code></td></tr>
<tr><td>re_required_modport</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>modport</code></td></tr>
<tr><td>re_required_module</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>module</code></td></tr>
<tr><td>re_required_package</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>package</code></td></tr>
<tr><td>re_required_parameter</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>parameter</code></td></tr>
<tr><td>re_required_port_inout</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>inout</code> port</td></tr>
<tr><td>re_required_port_input</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>input</code> port</td></tr>
<tr><td>re_required_port_modport</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>modport</code> port</td></tr>
<tr><td>re_required_port_output</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>output</code> port</td></tr>
<tr><td>re_required_reg</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of register type variable<sup class="footnote-reference"><a href="#reg">2</a></sup></td></tr>
<tr><td>re_required_struct</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of <code>struct</code></td></tr>
<tr><td>re_required_wire</td><td>regex<sup class="footnote-reference"><a href="#regex">4</a></sup></td><td>regex required of wire type variable<sup class="footnote-reference"><a href="#wire">3</a></sup></td></tr>
</tbody></table>
</div>
<div class="footnote-definition" id="casetype"><sup class="footnote-definition-label">1</sup>
<p>The available values are</p>
</div>
<ul>
<li><code>"snake"</code> – snake_case</li>
<li><code>"screaming_snake"</code> – SCREAMING_SNAKE_CASE</li>
<li><code>"lower_camel"</code> – lowerCamelCase</li>
<li><code>"upper_camel"</code> – UpperCamelCase</li>
</ul>
<div class="footnote-definition" id="regex"><sup class="footnote-definition-label">4</sup>
<p>Regular expression string like <code>".*"</code>. The available syntax is <a href="https://docs.rs/regex/latest/regex/#syntax">here</a>.</p>
</div>
<div class="footnote-definition" id="reg"><sup class="footnote-definition-label">2</sup>
<p>Register type means that the variable is assigned in <code>always_ff</code>. It will be mapped to flip-flop in synthesis phase.</p>
</div>
<div class="footnote-definition" id="wire"><sup class="footnote-definition-label">3</sup>
<p>Wire type means that the variable is assigned in <code>always_comb</code>. It will be mapped to wire in synthesis phase.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="language-server"><a class="header" href="#language-server">Language Server</a></h1>
<p><code>veryl-ls</code> is a language server binary.
If you want to use it, editor configuration or plugin to use it is required.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="compatibility"><a class="header" href="#compatibility">Compatibility</a></h1>
<p>Some tools supporting SystemVerilog don’t support some features.
Code generation can be customized by configuration of <code>Veryl.toml</code> to support these tools.</p>
<h2 id="vivado"><a class="header" href="#vivado">Vivado</a></h2>
<h3 id="string-parameter"><a class="header" href="#string-parameter">String parameter</a></h3>
<p>Vivado don’t support <code>parameter</code> which is typed as <code>string</code>.</p>
<pre><code class="language-verilog">parameter string a = "A";
</code></pre>
<p>So you can use <code>implicit_parameter_types</code> like below:</p>
<pre><code class="language-toml">[build]
implicit_parameter_types = ["string"]
</code></pre>
<p>By the configuration, the generated code becomes like below:</p>
<pre><code class="language-verilog">parameter a = "A";
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="documentation"><a class="header" href="#documentation">Documentation</a></h1>
<p>Documant of project can be generated by <code>veryl doc</code> command.
All public modules, interfaces and packages will be listed in it. (See <a href="05_development_environment/../04_language_reference/11_visibility.html">Visibility</a> )</p>
<p>If you want to add a detailed description, you can add documentation comment.
In the documentation comment, <a href="https://www.markdownguide.org">Markdown</a> syntax can be used.</p>
<pre><code class="language-veryl playground">/// The detailed description of ModuleA
///
/// * list item0
/// * list item1
pub module ModuleA #(
    /// Data width
    parameter  ParamA: u32 = 1,
    localparam ParamB: u32 = 1,
) (
    i_clk  : input  logic        , /// Clock
    i_rst_n: input  logic        , /// Reset
    i_data : input  logic&lt;ParamA&gt;, /// Data input
    o_data : output logic&lt;ParamA&gt;, /// Data output
) {}
</code></pre>
<p>The available configurations are below.
These can be specified in <code>[doc]</code> section of <code>Veryl.toml</code>.</p>
<pre><code class="language-toml">[doc]
path = "document"
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Configuration</th><th>Value</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td>path</td><td>string</td><td>“doc”</td><td>path to output directory</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="appendix"><a class="header" href="#appendix">Appendix</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="formal-syntax"><a class="header" href="#formal-syntax">Formal Syntax</a></h1>
<p>Veryl’s parser is based on parser generator <a href="https://github.com/jsinger67/parol">parol</a>.
The following syntex definition of parol is formal syntax.</p>
<pre><code>
%start Veryl
%title "Veryl grammar"
%comment "Empty grammar generated by `parol`"
%user_type VerylToken = crate::veryl_token::VerylToken
%user_type Token = crate::veryl_token::Token

%%

// ----------------------------------------------------------------------------
// Terminal
// ----------------------------------------------------------------------------

// Longest match should be first

CommentsTerm          : "(?:(?:(?://.*(?:\r\n|\r|\n|$))|(?:(?ms)/\u{2a}.*?\u{2a}/))\s*)+"                     : Token;
StringLiteralTerm     : "\u{0022}(?:\\[\u{0022}\\/bfnrt]|u[0-9a-fA-F]{4}|[^\u{0022}\\\u0000-\u001F])*\u{0022}": Token;
ExponentTerm          : /[0-9]+(?:_[0-9]+)*\.[0-9]+(?:_[0-9]+)*[eE][+-]?[0-9]+(?:_[0-9]+)*/                   : Token;
FixedPointTerm        : /[0-9]+(?:_[0-9]+)*\.[0-9]+(?:_[0-9]+)*/                                              : Token;
BasedTerm             : /(?:[0-9]+(?:_[0-9]+)*)?'[bodh][0-9a-fA-FxzXZ]+(?:_[0-9a-fA-FxzXZ]+)*/                : Token;
AllBitTerm            : /(?:[0-9]+(?:_[0-9]+)*)?'[01xzXZ]/                                                    : Token;
BaseLessTerm          : /[0-9]+(?:_[0-9]+)*/                                                                  : Token;
MinusColonTerm        : '-:'                                                                                  : Token;
MinusGTTerm           : '-&gt;'                                                                                  : Token;
PlusColonTerm         : '+:'                                                                                  : Token;
AssignmentOperatorTerm: "\+=|-=|\*=|/=|%=|&amp;=|\|=|\^=|&lt;&lt;=|&gt;&gt;=|&lt;&lt;&lt;=|&gt;&gt;&gt;="                                       : Token;
Operator11Term        : "\*\*"                                                                                : Token;
Operator10Term        : "/|%"                                                                                 : Token;
Operator09Term        : "\+|-"                                                                                : Token;
Operator08Term        : "&lt;&lt;&lt;|&gt;&gt;&gt;|&lt;&lt;|&gt;&gt;"                                                                       : Token;
Operator07Term        : "&lt;=|&gt;=|&lt;:|&gt;:"                                                                         : Token;
Operator06Term        : "===|==\?|!==|!=\?|==|!="                                                             : Token;
Operator02Term        : "&amp;&amp;"                                                                                  : Token;
Operator01Term        : "\|\|"                                                                                : Token;
Operator05Term        : "&amp;"                                                                                   : Token;
Operator04Term        : "\^~|\^|~\^"                                                                          : Token;
Operator03Term        : "\|"                                                                                  : Token;
UnaryOperatorTerm     : "~&amp;|~\||!|~"                                                                          : Token;
ColonColonTerm        : '::'                                                                                  : Token;
ColonTerm             : ':'                                                                                   : Token;
CommaTerm             : ','                                                                                   : Token;
DollarTerm            : '$'                                                                                   : Token;
DotDotEquTerm         : '..='                                                                                 : Token;
DotDotTerm            : '..'                                                                                  : Token;
DotTerm               : '.'                                                                                   : Token;
EquTerm               : '='                                                                                   : Token;
HashTerm              : '#'                                                                                   : Token;
LAngleTerm            : '&lt;'                                                                                   : Token;
LBraceTerm            : '{'                                                                                   : Token;
LBracketTerm          : '['                                                                                   : Token;
LParenTerm            : '('                                                                                   : Token;
RAngleTerm            : '&gt;'                                                                                   : Token;
RBraceTerm            : '}'                                                                                   : Token;
RBracketTerm          : ']'                                                                                   : Token;
RParenTerm            : ')'                                                                                   : Token;
SemicolonTerm         : ';'                                                                                   : Token;
StarTerm              : '*'                                                                                   : Token;
AlwaysCombTerm        : /(?-u:\b)always_comb(?-u:\b)/                                                         : Token;
AlwaysFfTerm          : /(?-u:\b)always_ff(?-u:\b)/                                                           : Token;
AssignTerm            : /(?-u:\b)assign(?-u:\b)/                                                              : Token;
AsyncHighTerm         : /(?-u:\b)async_high(?-u:\b)/                                                          : Token;
AsyncLowTerm          : /(?-u:\b)async_low(?-u:\b)/                                                           : Token;
AsTerm                : /(?-u:\b)as(?-u:\b)/                                                                  : Token;
BitTerm               : /(?-u:\b)bit(?-u:\b)/                                                                 : Token;
CaseTerm              : /(?-u:\b)case(?-u:\b)/                                                                : Token;
DefaultTerm           : /(?-u:\b)default(?-u:\b)/                                                             : Token;
ElseTerm              : /(?-u:\b)else(?-u:\b)/                                                                : Token;
EnumTerm              : /(?-u:\b)enum(?-u:\b)/                                                                : Token;
ExportTerm            : /(?-u:\b)export(?-u:\b)/                                                              : Token;
F32Term               : /(?-u:\b)f32(?-u:\b)/                                                                 : Token;
F64Term               : /(?-u:\b)f64(?-u:\b)/                                                                 : Token;
FinalTerm             : /(?-u:\b)final(?-u:\b)/                                                               : Token;
ForTerm               : /(?-u:\b)for(?-u:\b)/                                                                 : Token;
FunctionTerm          : /(?-u:\b)function(?-u:\b)/                                                            : Token;
I32Term               : /(?-u:\b)i32(?-u:\b)/                                                                 : Token;
I64Term               : /(?-u:\b)i64(?-u:\b)/                                                                 : Token;
IfResetTerm           : /(?-u:\b)if_reset(?-u:\b)/                                                            : Token;
IfTerm                : /(?-u:\b)if(?-u:\b)/                                                                  : Token;
ImportTerm            : /(?-u:\b)import(?-u:\b)/                                                              : Token;
InitialTerm           : /(?-u:\b)initial(?-u:\b)/                                                             : Token;
InoutTerm             : /(?-u:\b)inout(?-u:\b)/                                                               : Token;
InputTerm             : /(?-u:\b)input(?-u:\b)/                                                               : Token;
InsideTerm            : /(?-u:\b)inside(?-u:\b)/                                                              : Token;
InstTerm              : /(?-u:\b)inst(?-u:\b)/                                                                : Token;
InterfaceTerm         : /(?-u:\b)interface(?-u:\b)/                                                           : Token;
InTerm                : /(?-u:\b)in(?-u:\b)/                                                                  : Token;
LocalparamTerm        : /(?-u:\b)localparam(?-u:\b)/                                                          : Token;
LogicTerm             : /(?-u:\b)logic(?-u:\b)/                                                               : Token;
LsbTerm               : /(?-u:\b)lsb(?-u:\b)/                                                                 : Token;
ModportTerm           : /(?-u:\b)modport(?-u:\b)/                                                             : Token;
ModuleTerm            : /(?-u:\b)module(?-u:\b)/                                                              : Token;
MsbTerm               : /(?-u:\b)msb(?-u:\b)/                                                                 : Token;
NegedgeTerm           : /(?-u:\b)negedge(?-u:\b)/                                                             : Token;
OutputTerm            : /(?-u:\b)output(?-u:\b)/                                                              : Token;
OutsideTerm           : /(?-u:\b)outside(?-u:\b)/                                                             : Token;
PackageTerm           : /(?-u:\b)package(?-u:\b)/                                                             : Token;
ParameterTerm         : /(?-u:\b)parameter(?-u:\b)/                                                           : Token;
PosedgeTerm           : /(?-u:\b)posedge(?-u:\b)/                                                             : Token;
PubTerm               : /(?-u:\b)pub(?-u:\b)/                                                                 : Token;
RefTerm               : /(?-u:\b)ref(?-u:\b)/                                                                 : Token;
RepeatTerm            : /(?-u:\b)repeat(?-u:\b)/                                                              : Token;
ReturnTerm            : /(?-u:\b)return(?-u:\b)/                                                              : Token;
SignedTerm            : /(?-u:\b)signed(?-u:\b)/                                                              : Token;
StepTerm              : /(?-u:\b)step(?-u:\b)/                                                                : Token;
StringTerm            : /(?-u:\b)string(?-u:\b)/                                                              : Token;
StructTerm            : /(?-u:\b)struct(?-u:\b)/                                                              : Token;
SyncHighTerm          : /(?-u:\b)sync_high(?-u:\b)/                                                           : Token;
SyncLowTerm           : /(?-u:\b)sync_low(?-u:\b)/                                                            : Token;
TriTerm               : /(?-u:\b)tri(?-u:\b)/                                                                 : Token;
TypeTerm              : /(?-u:\b)type(?-u:\b)/                                                                : Token;
U32Term               : /(?-u:\b)u32(?-u:\b)/                                                                 : Token;
U64Term               : /(?-u:\b)u64(?-u:\b)/                                                                 : Token;
UnionTerm             : /(?-u:\b)union(?-u:\b)/                                                               : Token;
VarTerm               : /(?-u:\b)var(?-u:\b)/                                                                 : Token;
IdentifierTerm        : /[a-zA-Z_][0-9a-zA-Z_$]*/                                                             : Token;

// ----------------------------------------------------------------------------
// Token
// ----------------------------------------------------------------------------

Comments: [ CommentsTerm ];

StartToken: Comments;

StringLiteralToken: StringLiteralTerm: Token Comments;

ExponentToken  : ExponentTerm  : Token Comments;
FixedPointToken: FixedPointTerm: Token Comments;
BasedToken     : BasedTerm     : Token Comments;
BaseLessToken  : BaseLessTerm  : Token Comments;
AllBitToken    : AllBitTerm    : Token Comments;

AssignmentOperatorToken: AssignmentOperatorTerm: Token Comments;
Operator01Token        : Operator01Term        : Token Comments;
Operator02Token        : Operator02Term        : Token Comments;
Operator03Token        : Operator03Term        : Token Comments;
Operator04Token        : Operator04Term        : Token Comments;
Operator05Token        : Operator05Term        : Token Comments;
Operator06Token        : Operator06Term        : Token Comments;
Operator07Token        : Operator07Term        : Token Comments;
Operator08Token        : Operator08Term        : Token Comments;
Operator09Token        : Operator09Term        : Token Comments;
Operator10Token        : Operator10Term        : Token Comments;
Operator11Token        : Operator11Term        : Token Comments;
UnaryOperatorToken     : UnaryOperatorTerm     : Token Comments;

ColonToken       : ColonTerm       : Token Comments;
ColonColonToken  : ColonColonTerm  : Token Comments;
CommaToken       : CommaTerm       : Token Comments;
DollarToken      : DollarTerm      : Token Comments;
DotDotToken      : DotDotTerm      : Token Comments;
DotDotEquToken   : DotDotEquTerm   : Token Comments;
DotToken         : DotTerm         : Token Comments;
EquToken         : EquTerm         : Token Comments;
HashToken        : HashTerm        : Token Comments;
LAngleToken      : LAngleTerm      : Token Comments;
LBraceToken      : LBraceTerm      : Token Comments;
LBracketToken    : LBracketTerm    : Token Comments;
LParenToken      : LParenTerm      : Token Comments;
MinusColonToken  : MinusColonTerm  : Token Comments;
MinusGTToken     : MinusGTTerm     : Token Comments;
PlusColonToken   : PlusColonTerm   : Token Comments;
RAngleToken      : RAngleTerm      : Token Comments;
RBraceToken      : RBraceTerm      : Token Comments;
RBracketToken    : RBracketTerm    : Token Comments;
RParenToken      : RParenTerm      : Token Comments;
SemicolonToken   : SemicolonTerm   : Token Comments;
StarToken        : StarTerm        : Token Comments;

AlwaysCombToken: AlwaysCombTerm: Token Comments;
AlwaysFfToken  : AlwaysFfTerm  : Token Comments;
AsToken        : AsTerm        : Token Comments;
AssignToken    : AssignTerm    : Token Comments;
AsyncHighToken : AsyncHighTerm : Token Comments;
AsyncLowToken  : AsyncLowTerm  : Token Comments;
BitToken       : BitTerm       : Token Comments;
CaseToken      : CaseTerm      : Token Comments;
DefaultToken   : DefaultTerm   : Token Comments;
ElseToken      : ElseTerm      : Token Comments;
EnumToken      : EnumTerm      : Token Comments;
ExportToken    : ExportTerm    : Token Comments;
F32Token       : F32Term       : Token Comments;
F64Token       : F64Term       : Token Comments;
FinalToken     : FinalTerm     : Token Comments;
ForToken       : ForTerm       : Token Comments;
FunctionToken  : FunctionTerm  : Token Comments;
I32Token       : I32Term       : Token Comments;
I64Token       : I64Term       : Token Comments;
IfResetToken   : IfResetTerm   : Token Comments;
IfToken        : IfTerm        : Token Comments;
ImportToken    : ImportTerm    : Token Comments;
InitialToken   : InitialTerm   : Token Comments;
InoutToken     : InoutTerm     : Token Comments;
InputToken     : InputTerm     : Token Comments;
InsideToken    : InsideTerm    : Token Comments;
InstToken      : InstTerm      : Token Comments;
InterfaceToken : InterfaceTerm : Token Comments;
InToken        : InTerm        : Token Comments;
LocalparamToken: LocalparamTerm: Token Comments;
LogicToken     : LogicTerm     : Token Comments;
LsbToken       : LsbTerm       : Token Comments;
ModportToken   : ModportTerm   : Token Comments;
ModuleToken    : ModuleTerm    : Token Comments;
MsbToken       : MsbTerm       : Token Comments;
NegedgeToken   : NegedgeTerm   : Token Comments;
OutputToken    : OutputTerm    : Token Comments;
OutsideToken   : OutsideTerm   : Token Comments;
PackageToken   : PackageTerm   : Token Comments;
ParameterToken : ParameterTerm : Token Comments;
PosedgeToken   : PosedgeTerm   : Token Comments;
PubToken       : PubTerm       : Token Comments;
RefToken       : RefTerm       : Token Comments;
RepeatToken    : RepeatTerm    : Token Comments;
ReturnToken    : ReturnTerm    : Token Comments;
SignedToken    : SignedTerm    : Token Comments;
StepToken      : StepTerm      : Token Comments;
StringToken    : StringTerm    : Token Comments;
StructToken    : StructTerm    : Token Comments;
SyncHighToken  : SyncHighTerm  : Token Comments;
SyncLowToken   : SyncLowTerm   : Token Comments;
TriToken       : TriTerm       : Token Comments;
TypeToken      : TypeTerm      : Token Comments;
U32Token       : U32Term       : Token Comments;
U64Token       : U64Term       : Token Comments;
UnionToken     : UnionTerm     : Token Comments;
VarToken       : VarTerm       : Token Comments;

IdentifierToken: IdentifierTerm: Token Comments;

// ----------------------------------------------------------------------------
// VerylToken
// ----------------------------------------------------------------------------

// Start
Start: StartToken: VerylToken;

// StringLiteral
StringLiteral: StringLiteralToken: VerylToken;

// Number
Exponent  : ExponentToken  : VerylToken;
FixedPoint: FixedPointToken: VerylToken;
Based     : BasedToken     : VerylToken;
BaseLess  : BaseLessToken  : VerylToken;
AllBit    : AllBitToken    : VerylToken;

// Operator
AssignmentOperator: AssignmentOperatorToken: VerylToken;
Operator01        : Operator01Token        : VerylToken;
Operator02        : Operator02Token        : VerylToken;
Operator03        : Operator03Token        : VerylToken;
Operator04        : Operator04Token        : VerylToken;
Operator05        : Operator05Token        : VerylToken;
Operator06        : Operator06Token        : VerylToken;
Operator07        : Operator07Token        : VerylToken;
Operator08        : Operator08Token        : VerylToken;
Operator09        : Operator09Token        : VerylToken;
Operator10        : Operator10Token        : VerylToken;
Operator11        : Operator11Token        : VerylToken;
UnaryOperator     : UnaryOperatorToken     : VerylToken;

// Symbol
Colon       : ColonToken       : VerylToken;
ColonColon  : ColonColonToken  : VerylToken;
Comma       : CommaToken       : VerylToken;
Dollar      : DollarToken      : VerylToken;
DotDot      : DotDotToken      : VerylToken;
DotDotEqu   : DotDotEquToken   : VerylToken;
Dot         : DotToken         : VerylToken;
Equ         : EquToken         : VerylToken;
Hash        : HashToken        : VerylToken;
LAngle      : LAngleToken      : VerylToken;
LBrace      : LBraceToken      : VerylToken;
LBracket    : LBracketToken    : VerylToken;
LParen      : LParenToken      : VerylToken;
MinusColon  : MinusColonToken  : VerylToken;
MinusGT     : MinusGTToken     : VerylToken;
PlusColon   : PlusColonToken   : VerylToken;
RAngle      : RAngleToken      : VerylToken;
RBrace      : RBraceToken      : VerylToken;
RBracket    : RBracketToken    : VerylToken;
RParen      : RParenToken      : VerylToken;
Semicolon   : SemicolonToken   : VerylToken;
Star        : StarToken        : VerylToken;

// Keyword
AlwaysComb: AlwaysCombToken: VerylToken;
AlwaysFf  : AlwaysFfToken  : VerylToken;
As        : AsToken        : VerylToken;
Assign    : AssignToken    : VerylToken;
AsyncHigh : AsyncHighToken : VerylToken;
AsyncLow  : AsyncLowToken  : VerylToken;
Bit       : BitToken       : VerylToken;
Case      : CaseToken      : VerylToken;
Defaul    : DefaultToken   : VerylToken; // avoid to conflict with Rust's Default trait
Else      : ElseToken      : VerylToken;
Enum      : EnumToken      : VerylToken;
Export    : ExportToken    : VerylToken;
F32       : F32Token       : VerylToken;
F64       : F64Token       : VerylToken;
Final     : FinalToken     : VerylToken;
For       : ForToken       : VerylToken;
Function  : FunctionToken  : VerylToken;
I32       : I32Token       : VerylToken;
I64       : I64Token       : VerylToken;
If        : IfToken        : VerylToken;
IfReset   : IfResetToken   : VerylToken;
Import    : ImportToken    : VerylToken;
In        : InToken        : VerylToken;
Initial   : InitialToken   : VerylToken;
Inout     : InoutToken     : VerylToken;
Input     : InputToken     : VerylToken;
Inside    : InsideToken    : VerylToken;
Inst      : InstToken      : VerylToken;
Interface : InterfaceToken : VerylToken;
Localparam: LocalparamToken: VerylToken;
Logic     : LogicToken     : VerylToken;
Lsb       : LsbToken       : VerylToken;
Modport   : ModportToken   : VerylToken;
Module    : ModuleToken    : VerylToken;
Msb       : MsbToken       : VerylToken;
Negedge   : NegedgeToken   : VerylToken;
Output    : OutputToken    : VerylToken;
Outside   : OutsideToken   : VerylToken;
Package   : PackageToken   : VerylToken;
Parameter : ParameterToken : VerylToken;
Posedge   : PosedgeToken   : VerylToken;
Pub       : PubToken       : VerylToken;
Ref       : RefToken       : VerylToken;
Repeat    : RepeatToken    : VerylToken;
Return    : ReturnToken    : VerylToken;
Signed    : SignedToken    : VerylToken;
Step      : StepToken      : VerylToken;
Strin     : StringToken    : VerylToken; // avoid to conflict with Rust's String struct
Struct    : StructToken    : VerylToken;
SyncHigh  : SyncHighToken  : VerylToken;
SyncLow   : SyncLowToken   : VerylToken;
Tri       : TriToken       : VerylToken;
Type      : TypeToken      : VerylToken;
U32       : U32Token       : VerylToken;
U64       : U64Token       : VerylToken;
Union     : UnionToken     : VerylToken;
Var       : VarToken       : VerylToken;

// Identifier
Identifier: IdentifierToken: VerylToken;

// ----------------------------------------------------------------------------
// Number
// ----------------------------------------------------------------------------

Number: IntegralNumber
      | RealNumber
      ;

IntegralNumber: Based
              | BaseLess
              | AllBit
              ;

RealNumber: FixedPoint
          | Exponent
          ;

// ----------------------------------------------------------------------------
// Complex Identifier
// ----------------------------------------------------------------------------

HierarchicalIdentifier: Identifier { Select } { Dot Identifier { Select } };
ScopedIdentifier      : [ Dollar ] Identifier { ColonColon Identifier };
ExpressionIdentifier  : [ Dollar ] Identifier ( ExpressionIdentifierScoped | ExpressionIdentifierMember );

ExpressionIdentifierScoped: ColonColon Identifier { ColonColon Identifier } { Select };
ExpressionIdentifierMember: { Select } { Dot Identifier { Select } };

// ----------------------------------------------------------------------------
// Expression
// ----------------------------------------------------------------------------

Expression  : Expression01 { Operator01 Expression01 };
Expression01: Expression02 { Operator02 Expression02 };
Expression02: Expression03 { Operator03 Expression03 };
Expression03: Expression04 { Operator04 Expression04 };
Expression04: Expression05 { Operator05 Expression05 };
Expression05: Expression06 { Operator06 Expression06 };
Expression06: Expression07 { Operator07 Expression07 };
Expression07: Expression08 { Operator08 Expression08 };
Expression08: Expression09 { Operator09 Expression09 };
Expression09: Expression10 { ( Operator10 | Star ) Expression10 };
Expression10: Expression11 { Operator11 Expression11 };
Expression11: Expression12 { As ScopedIdentifier };
Expression12: { ( UnaryOperator | Operator09 | Operator05 | Operator03 | Operator04 ) } Factor;

Factor: Number
      | ExpressionIdentifier [ FunctionCall ]
      | LParen Expression RParen
      | LBrace ConcatenationList RBrace
      | IfExpression
      | CaseExpression
      | StringLiteral
      | ( Msb | Lsb )
      | InsideExpression
      | OutsideExpression
      ;

FunctionCall: LParen [ ArgumentList ] RParen;

ArgumentList: ArgumentItem { Comma ArgumentItem } [ Comma ];

ArgumentItem: Expression;

ConcatenationList: ConcatenationItem { Comma ConcatenationItem } [ Comma ];

ConcatenationItem: Expression [ Repeat Expression ];

IfExpression: If Expression LBrace Expression RBrace { Else If Expression LBrace Expression RBrace } Else LBrace Expression RBrace;

CaseExpression: Case Expression LBrace Expression Colon Expression Comma { Expression Colon Expression Comma } Defaul Colon Expression [ Comma ] RBrace;

TypeExpression: ScalarType
              | Type LParen Expression RParen
              ;

InsideExpression: Inside Expression LBrace RangeList RBrace;

OutsideExpression: Outside Expression LBrace RangeList RBrace;

RangeList: RangeItem { Comma RangeItem } [ Comma ];

RangeItem: Range;

// ----------------------------------------------------------------------------
// Select / Width / Array / Range
// ----------------------------------------------------------------------------

Select: LBracket Expression [ SelectOperator Expression ] RBracket;

SelectOperator: Colon
              | PlusColon
              | MinusColon
              | Step
              ;

Width: LAngle Expression { Comma Expression } RAngle;

Array: LBracket Expression { Comma Expression } RBracket;

Range: Expression [ RangeOperator Expression ];

RangeOperator: DotDot
             | DotDotEqu
             ;

// ----------------------------------------------------------------------------
// ScalarType / ArrayType
// ----------------------------------------------------------------------------

FixedType: U32 | U64 | I32 | I64 | F32 | F64 | Strin;

VariableType: ( Logic | Bit | ScopedIdentifier ) [ Width ];

TypeModifier: Tri | Signed;

ScalarType: { TypeModifier } ( VariableType | FixedType );

ArrayType: ScalarType [ Array ];

// ----------------------------------------------------------------------------
// Statement
// ----------------------------------------------------------------------------

Statement: IdentifierStatement
         | IfStatement
         | IfResetStatement
         | ReturnStatement
         | ForStatement
         | CaseStatement
         ;

IdentifierStatement: ExpressionIdentifier ( FunctionCall | Assignment ) Semicolon;

Assignment: ( Equ | AssignmentOperator ) Expression;

IfStatement: If Expression LBrace { Statement } RBrace { Else If Expression LBrace { Statement } RBrace } [ Else LBrace { Statement } RBrace ];

IfResetStatement: IfReset LBrace { Statement } RBrace { Else If Expression LBrace { Statement } RBrace } [ Else LBrace { Statement } RBrace ];

ReturnStatement: Return Expression Semicolon;

ForStatement: For Identifier Colon ScalarType In Range [ Step AssignmentOperator Expression ] LBrace { Statement } RBrace;

CaseStatement: Case Expression LBrace { CaseItem } RBrace;

CaseItem: ( Expression | Defaul ) Colon ( Statement | LBrace { Statement } RBrace );

// ----------------------------------------------------------------------------
// Attribute
// ----------------------------------------------------------------------------

Attribute: Hash LBracket Identifier [ LParen AttributeList RParen ] RBracket;

AttributeList: AttributeItem { Comma AttributeItem } [ Comma ];

AttributeItem: Identifier
             | StringLiteral
             ;

// ----------------------------------------------------------------------------
// Declaration
// ----------------------------------------------------------------------------

VarDeclaration: Var Identifier Colon ArrayType [ Equ Expression ] Semicolon;

LocalparamDeclaration: Localparam Identifier Colon ( ArrayType Equ Expression | Type Equ TypeExpression ) Semicolon;

TypeDefDeclaration: Type Identifier Equ ArrayType Semicolon;

AlwaysFfDeclaration: AlwaysFf LParen AlwaysFfClock [ Comma AlwaysFfReset ] RParen LBrace { Statement } RBrace;

AlwaysFfClock: [ Posedge | Negedge ] HierarchicalIdentifier;

AlwaysFfReset: [ AsyncLow | AsyncHigh | SyncLow | SyncHigh ] HierarchicalIdentifier;

AlwaysCombDeclaration: AlwaysComb LBrace { Statement } RBrace;

AssignDeclaration: Assign HierarchicalIdentifier Equ Expression Semicolon;

ModportDeclaration: Modport Identifier LBrace ModportList RBrace;

ModportList: ModportGroup { Comma ModportGroup } [ Comma ];

ModportGroup: { Attribute } ( LBrace ModportList RBrace | ModportItem );

ModportItem: Identifier Colon Direction;

EnumDeclaration: Enum Identifier Colon ScalarType LBrace EnumList RBrace;

EnumList: EnumGroup { Comma EnumGroup } [ Comma ];

EnumGroup: { Attribute } ( LBrace EnumList RBrace | EnumItem );

EnumItem: Identifier [ Equ Expression ];

StructUnion: Struct | Union;

StructUnionDeclaration: StructUnion Identifier LBrace StructUnionList RBrace;

StructUnionList: StructUnionGroup { Comma StructUnionGroup } [ Comma ];

StructUnionGroup: { Attribute } ( LBrace StructUnionList RBrace | StructUnionItem );

StructUnionItem: Identifier Colon ScalarType;

InitialDeclaration: Initial LBrace { Statement } RBrace;

FinalDeclaration: Final LBrace { Statement } RBrace;

// ----------------------------------------------------------------------------
// InstDeclaration
// ----------------------------------------------------------------------------

InstDeclaration: Inst Identifier Colon ScopedIdentifier [ Array ] [ InstParameter ] [ LParen [ InstPortList ] RParen ] Semicolon;

InstParameter: Hash LParen [ InstParameterList ] RParen;

InstParameterList: InstParameterGroup { Comma InstParameterGroup } [ Comma ];

InstParameterGroup: { Attribute } ( LBrace InstParameterList RBrace | InstParameterItem );

InstParameterItem: Identifier [ Colon Expression ];

InstPortList: InstPortGroup { Comma InstPortGroup } [ Comma ];

InstPortGroup: { Attribute } ( LBrace InstPortList RBrace | InstPortItem );

InstPortItem: Identifier [ Colon Expression ];

// ----------------------------------------------------------------------------
// WithParameter
// ----------------------------------------------------------------------------

WithParameter: Hash LParen [ WithParameterList ] RParen;

WithParameterList: WithParameterGroup { Comma WithParameterGroup } [ Comma ];

WithParameterGroup: { Attribute } ( LBrace WithParameterList RBrace | WithParameterItem );

WithParameterItem: ( Parameter | Localparam ) Identifier Colon ( ArrayType Equ Expression | Type Equ TypeExpression );

// ----------------------------------------------------------------------------
// PortDeclaration
// ----------------------------------------------------------------------------

PortDeclaration: LParen [ PortDeclarationList ] RParen;

PortDeclarationList: PortDeclarationGroup { Comma PortDeclarationGroup } [ Comma ];

PortDeclarationGroup: { Attribute } ( LBrace PortDeclarationList RBrace | PortDeclarationItem );

PortDeclarationItem: Identifier Colon ( Direction ArrayType | Interface [ Array ] );

Direction: Input
         | Output
         | Inout
         | Ref
         | Modport
         ;

// ----------------------------------------------------------------------------
// Function
// ----------------------------------------------------------------------------

FunctionDeclaration: Function Identifier [ WithParameter ] [ PortDeclaration ] [ MinusGT ScalarType ] LBrace { FunctionItem } RBrace;

FunctionItem: VarDeclaration
            | Statement
            ;

// ----------------------------------------------------------------------------
// Import / Export
// ----------------------------------------------------------------------------

ImportDeclaration: Import ScopedIdentifier [ ColonColon Star ] Semicolon;

ExportDeclaration: Export ( Star | ScopedIdentifier [ ColonColon Star ] ) Semicolon;

// ----------------------------------------------------------------------------
// Module
// ----------------------------------------------------------------------------

ModuleDeclaration: [ Pub ] Module Identifier [ WithParameter ] [ PortDeclaration ] LBrace { ModuleGroup } RBrace;

ModuleIfDeclaration: If Expression ModuleNamedBlock { Else If Expression ModuleOptionalNamedBlock } [ Else ModuleOptionalNamedBlock ];

ModuleForDeclaration: For Identifier In Range [ Step AssignmentOperator Expression ] ModuleNamedBlock;

ModuleNamedBlock: Colon Identifier LBrace { ModuleGroup } RBrace;

ModuleOptionalNamedBlock: [ Colon Identifier ] LBrace { ModuleGroup } RBrace;

ModuleGroup: { Attribute } ( LBrace { ModuleGroup } RBrace | ModuleItem );

ModuleItem: VarDeclaration
          | InstDeclaration
          | TypeDefDeclaration
          | LocalparamDeclaration
          | AlwaysFfDeclaration
          | AlwaysCombDeclaration
          | AssignDeclaration
          | FunctionDeclaration
          | ModuleIfDeclaration
          | ModuleForDeclaration
          | EnumDeclaration
          | StructUnionDeclaration
          | ModuleNamedBlock
          | ImportDeclaration
          | InitialDeclaration
          | FinalDeclaration
          ;

// ----------------------------------------------------------------------------
// Interface
// ----------------------------------------------------------------------------

InterfaceDeclaration: [ Pub ] Interface Identifier [ WithParameter ] LBrace { InterfaceGroup } RBrace;

InterfaceIfDeclaration: If Expression InterfaceNamedBlock { Else If Expression InterfaceOptionalNamedBlock } [ Else InterfaceOptionalNamedBlock ];

InterfaceForDeclaration: For Identifier In Range [ Step AssignmentOperator Expression ] InterfaceNamedBlock;

InterfaceNamedBlock: Colon Identifier LBrace { InterfaceGroup } RBrace;

InterfaceOptionalNamedBlock: [ Colon Identifier ] LBrace { InterfaceGroup } RBrace;

InterfaceGroup: { Attribute } ( LBrace { InterfaceGroup } RBrace | InterfaceItem );

InterfaceItem: VarDeclaration
             | LocalparamDeclaration
             | ModportDeclaration
             | InterfaceIfDeclaration
             | InterfaceForDeclaration
             | EnumDeclaration
             | StructUnionDeclaration
             | InterfaceNamedBlock
             | FunctionDeclaration
             | ImportDeclaration
             | InitialDeclaration
             | FinalDeclaration
             ;

// ----------------------------------------------------------------------------
// Package
// ----------------------------------------------------------------------------

PackageDeclaration: [ Pub ] Package Identifier LBrace { PackageGroup } RBrace;

PackageGroup: { Attribute } ( LBrace { PackageGroup } RBrace | PackageItem );

PackageItem: VarDeclaration
           | LocalparamDeclaration
           | TypeDefDeclaration
           | EnumDeclaration
           | StructUnionDeclaration
           | FunctionDeclaration
           | ImportDeclaration
           | ExportDeclaration
           | InitialDeclaration
           | FinalDeclaration
           ;

// ----------------------------------------------------------------------------
// Description
// ----------------------------------------------------------------------------

DescriptionGroup: { Attribute } ( LBrace { DescriptionGroup } RBrace | DescriptionItem );

DescriptionItem: ModuleDeclaration
               | InterfaceDeclaration
               | PackageDeclaration
               | ImportDeclaration
               ;

// ----------------------------------------------------------------------------
// SourceCode
// ----------------------------------------------------------------------------

Veryl: Start { DescriptionGroup };
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="semantic-error"><a class="header" href="#semantic-error">Semantic Error</a></h1>
<h2 id="duplicated_identifier"><a class="header" href="#duplicated_identifier">duplicated_identifier</a></h2>
<h2 id="invalid_allow"><a class="header" href="#invalid_allow">invalid_allow</a></h2>
<h2 id="invalid_direction"><a class="header" href="#invalid_direction">invalid_direction</a></h2>
<h2 id="invalid_identifier"><a class="header" href="#invalid_identifier">invalid_identifier</a></h2>
<h2 id="invalid_lsb"><a class="header" href="#invalid_lsb">invalid_lsb</a></h2>
<h2 id="invalid_msb"><a class="header" href="#invalid_msb">invalid_msb</a></h2>
<h2 id="invalid_number_character"><a class="header" href="#invalid_number_character">invalid_number_character</a></h2>
<h2 id="invalid_statement"><a class="header" href="#invalid_statement">invalid_statement</a></h2>
<h2 id="invalid_system_function"><a class="header" href="#invalid_system_function">invalid_system_function</a></h2>
<h2 id="mismatch_arity"><a class="header" href="#mismatch_arity">mismatch_arity</a></h2>
<h2 id="mismatch_attribute_args"><a class="header" href="#mismatch_attribute_args">mismatch_attribute_args</a></h2>
<h2 id="mismatch_type"><a class="header" href="#mismatch_type">mismatch_type</a></h2>
<h2 id="missing_if_reset"><a class="header" href="#missing_if_reset">missing_if_reset</a></h2>
<h2 id="missing_port"><a class="header" href="#missing_port">missing_port</a></h2>
<h2 id="missing_reset_signal"><a class="header" href="#missing_reset_signal">missing_reset_signal</a></h2>
<h2 id="missing_reset_statement"><a class="header" href="#missing_reset_statement">missing_reset_statement</a></h2>
<h2 id="too_large_enum_variant"><a class="header" href="#too_large_enum_variant">too_large_enum_variant</a></h2>
<h2 id="too_large_number"><a class="header" href="#too_large_number">too_large_number</a></h2>
<h2 id="too_much_enum_variant"><a class="header" href="#too_much_enum_variant">too_much_enum_variant</a></h2>
<h2 id="undefined_identifier"><a class="header" href="#undefined_identifier">undefined_identifier</a></h2>
<h2 id="unknown_attribute"><a class="header" href="#unknown_attribute">unknown_attribute</a></h2>
<h2 id="unknown_member"><a class="header" href="#unknown_member">unknown_member</a></h2>
<h2 id="unknown_msb"><a class="header" href="#unknown_msb">unknown_msb</a></h2>
<h2 id="unknown_port"><a class="header" href="#unknown_port">unknown_port</a></h2>
<h2 id="unused_variable"><a class="header" href="#unused_variable">unused_variable</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>
        <script type="module">
            import init, {build, format} from "https://dalance.github.io/veryl/playground/pkg/veryl_wasm.js";
            init().then(() => {});
            window.build = build;
        </script>

        <!-- Custom JS scripts -->
        <script src="mode-veryl.js"></script>
        <script src="editor.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
